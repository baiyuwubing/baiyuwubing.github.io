function removeFromParant(e){e&&e.parent&&e.parent.removeChild(e)}var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);a.prototype=t.prototype,e.prototype=new a},__awaiter=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(r,o)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function a(e){return function(t){return i([e,t])}}function i(a){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,s&&(r=s[2&a[0]?"return":a[0]?"throw":"next"])&&!(r=r.call(s,a[1])).done)return r;switch(s=0,r&&(a=[0,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,s=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){l=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){l.label=a[1];break}if(6===a[0]&&l.label<r[1]){l.label=r[1],r=a;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(a);break}r[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(i){a=[6,i],s=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var n,s,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},GameState;!function(e){e[e.beginEnvirment=0]="beginEnvirment",e[e.runningTime=1]="runningTime"}(GameState||(GameState={}));var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cacheQueue=new Array,t._squeezeQueue=new Array,t._squeezeFireQueue=new Array,t._eliminateQueue=new Array,t._eliminateQueueDoBack=new Array,t._tagList=new Array,t._isCache=!1,t._wave=1,t._currentCount=0,t._beforeFailure=!1,t._showDangerous=!1,t._fastSpeed=!1,t._startGame=!1,t._gameTime=GameConst.gameTime,t._guideIndex=0,t._clearScore=0,t._chainScore=0,t._comboScore=0,t._boardClearScore=0,t._gameState=GameState.beginEnvirment,t._gameIsFirstActive=!1,t._tick=0,t._ballDynamicTotalCount=0,t._endGame=!1,t._delayGameOver=!1,t._fallbackQueue=new Array,t._mapIndex=1,t._oldMaxWave=0,t._chain=0,t._combo=0,t._oldChain=0,t._oldCombo=0,t._labelType=0,t._eliminateEffectQueue=new Array,t._itemTypeList=new Array,t._labelPos=new egret.Point,t._firedRainbowBall=!0,t.gameTimeLeft=GameConst.gameTime,t._isComplete321Time=!1,t._initedSDK=!1,t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t._delayGameOverTimeoutId=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"beforeFailure",{get:function(){return this._beforeFailure},set:function(e){this._beforeFailure=e,this._mypanel.showHoleDanger(e),this._endGame||this._showDangerous||!e||(this._showDangerous=!0,this._mypanel.showDangerours())},enumerable:!0,configurable:!0}),t.prototype.createChildren=function(){var a=this;e.prototype.createChildren.call(this),null==t._main&&(t._main=this);var i=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView);var n=this.createBitmapByName("texiaoPngTuji_json.pause");n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,this.stage.addChild(n),n.x=this.stage.width/2,n.y=this.stage.height/2,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),platform.getUserInfo().then(function(){a._initedSDK=!0,a.createScene()})},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){var e=this;this.isThemeLoadEnd&&this.isResourceLoadEnd&&this._initedSDK&&(GameConst.isSDK&&Bigbear.sucess_enter_game_inform(),SoundMgr.ins().init(),removeFromParant(this.loadingView),this._snakeSegment=new Array,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),egret.lifecycle.onPause=function(){GuideMgr.ins().hasGuided()||0!=e._myGameOverUI.visible||(e.gameTimeDely&&e.gameTimeDely.stop(),e._myResumePause.oldState=e._gameState,e._gameState=GameState.beginEnvirment,e._gameIsFirstActive=!0,GameConst.exitTime=(new Date).getTime(),e._myResumePause.show(!0))},egret.lifecycle.onResume=function(){if(e._gameIsFirstActive){if(2==GameConst.gametype){GameConst.enterTime=(new Date).getTime(),GameBulletinBoard.GameManager.gameTimeDely.start();var t=Math.round((GameConst.enterTime-GameConst.exitTime)/1e3);e._guideView.isGuidePasue()||(e.gameTimeLeft-=t),e.gameTimeLeft<-1&&(e.gameTimeLeft=0,e._mypanel.updateTimeLabel(0),GameConst.duizhanchaoshi=!0,e._gameState=GameState.beginEnvirment,e._endGame=!0,GameBulletinBoard._NPCFire.Lose(),e.gameTimeDely.stop(),e._myResumePause.hide(),GameBulletinBoard._GameOverUI.showTimesUp(),e.showGameOverUI())}e._gameIsFirstActive=!1}},this.lastTime=egret.getTimer(),this.startCreateScene())},t.prototype.onDeactivate=function(e){this.gameTimeDely.stop(),this._gameState=GameState.beginEnvirment,this._gameIsFirstActive=!0},t.prototype.onActivate=function(e){this._gameIsFirstActive&&(this.gameTimeDely.start(),this._gameState=GameState.runningTime,this._gameIsFirstActive=!1)},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onTouchBegin=function(e){},t.prototype.onTouchTap=function(e){GuideMgr.ins().hasGuided()||1==GameConst.guide&&GameBulletinBoard.GameManager._guideIndex<2||GameBulletinBoard._NPCFire._isLock||this._gameState==GameState.beginEnvirment||(GameBulletinBoard._NPCFire._isTouchState=!0,GameBulletinBoard._NPCFire._isTouchState&&(GameBulletinBoard._NPCFire._touchPosition=new egret.Point(e.stageX,e.stageY)),GameBulletinBoard._NPCFire._endGame||GameBulletinBoard._NPCFire._isTouchState&&GameBulletinBoard._NPCFire._touchPosition.y>GameConst.touchYPosition&&(GameBulletinBoard._NPCFire._touchPosition=new egret.Point(e.stageX,e.stageY),GameBulletinBoard._NPCFire._touchPosition=this.globalToLocal(e.stageX,e.stageY),GameBulletinBoard._NPCFire._isTouchState=!1,this._myNPCFire.hitTestPoint(e.stageX,e.stageY,!0)?GameBulletinBoard._NPCFire._isChangeBall||GameBulletinBoard._NPCFire.OnChangeBall():GameBulletinBoard._mypanel.rainbowBg.hitTestPoint(e.stageX,e.stageY,!0)||GameBulletinBoard._NPCFire._isChangeBall||(GameBulletinBoard._NPCFire.GaveDirections(),GameBulletinBoard._NPCFire.OnFire())))},t.prototype.onEnterFrame=function(e){var t=egret.getTimer(),a=this.lastTime,i=t-a;MarkDataUtil.updateData(this.gameTimeLeft,this._score,this._wave),this._gameState==GameState.runningTime&&(this._tick++,this.CheckFireBallCross(i),this.CheckFireSqueeze(),this.CheckSqueeze(i),this.CheckEliminate(),this.CheckEliminateDoBack(),this.CheckFallBackBall(i),this.CheckSnakeConnect(),this.CheckFirstSegmentAttack(i),this.CheckBallInEndPoint(),this.CheckInScene(),this.UpdateBallRender(),GameBulletinBoard._NPCFire.NPCUpdate(),GameBulletinBoard._FireBallManager.FireBallManagerUpdate(i)),this.lastTime=egret.getTimer()},t.prototype.CheckFirstSegmentAttack=function(e){if(e/=1e3,!this._startGame&&0==this._snakeSegment.length&&this._wave<GameConst.finalWave){this._startGame=!0,this._currentCount++;var t=this.CreateActiveBall();return t._wave=this._wave,t._power=1,t._insert=0,0==GameConst.guide&&(t._originSpeed=this.GetOriginSpeed(),t._speed=GameConst.enterSpeed,t.easeSpeed=GameConst.enterSpeed,t._processIndex=GameBulletinBoard.MapConfig.StartPoint),1==GameConst.guide&&(t._originSpeed=GameConst.guideSpeed,t._speed=GameConst.guideSpeed,t.easeSpeed=GameConst.guideSpeed,t._processIndex=GameBulletinBoard.MapConfig.GuideStartPoint),11==GameConst.guide,12==GameConst.guide,void this._snakeSegment.splice(0,0,t)}this._wave==GameConst.finalWave&&(this._ballDynamicTotalCount=GameConst.finalWaveBallCount);var a=this._snakeSegment.length>0?this._snakeSegment[0]:null;if(null!=a&&this._currentCount<this._ballDynamicTotalCount&&GameHelper.IsNotHoleExit(a))if(this._currentCount<=0)this._currentCount++,this.ContinueCreateBall();else{this._currentCount++;var i=this.CreateActiveBall();i._wave=this._wave,i._power=1,i._insert=0,i._originSpeed=a._originSpeed,i._speed=a._speed,i.easeSpeed=a._easeSpeed,i._processIndex=a._processIndex-GameConst.ballSpace,i.SetNext(a),a.SetPre(i),a._power=0,this._snakeSegment[0]=i,a=i}0==GameConst.guide&&0==this._endGame&&-1!=GameConst.waveDistance&&null!=this._snakeSegment[0]&&this._snakeSegment[0]._processIndex>(1==this._wave?GameConst.firstWaveHeadIndex:2*this._wave+GameConst.waveDistance)&&this._wave<GameConst.finalWave&&this.WaveStart(),12==GameConst.guide;var n=this._snakeSegment.length;if(n>0){if(!this._endGame&&this._beforeFailure){for(var s=this._snakeSegment.length;s-->0;){var r=this._snakeSegment[s];if(1==r._power){GameHelper.IsArriveBeforeFailurePoint(r.Tail())||(this.beforeFailure=!1);break}}if(!this._beforeFailure)for(s=this._snakeSegment.length;s-->0;){var r=this._snakeSegment[s];1==r._power&&r.Tail()._speed>0&&(r._speed=this.GetFixedSpeed(r))}}if(GameConst.guide>0&&(GameBulletinBoard.MapConfig.FastSpeedEndPoint=GuideMgr.ins().fastSpeedEndIndex),11==GameConst.guide,12==GameConst.guide,0==GameConst.guide&&(this._wave>1?GameBulletinBoard.MapConfig.FastSpeedEndPoint=GameConst.fastSpeedEndIndex:GameBulletinBoard.MapConfig.FastSpeedEndPoint=GameConst.firstWaveEndIndex),0==this._fastSpeed&&0==this._snakeSegment[n-1].Tail()._insert&&!GameHelper.IsArriveFastSpeedStartPoint(this._snakeSegment[n-1].Tail())){this._fastSpeed=!0;for(var o=n-1;o>=0;o--){var r=this._snakeSegment[o];1==r._power&&(0==GameConst.guide&&(r._speed=GameConst.fastSpeed),1==GameConst.guide&&(r._speed=GameConst.guideSpeed),11==GameConst.guide,12==GameConst.guide)}if(this._wave>1){var l=this.createBitmapByName("gameoverFinishTuji_json.clear");l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,this.addChild(l),l.x=this._mypanel.mapinfo.width/2,l.y=this._mypanel.mapinfo.height/2,l.$setScaleX(.6),l.$setScaleY(.6);var h=l.y-100;egret.Tween.get(l).wait(500).to({y:h},500,egret.Ease.sineIn).to({alpha:0},200).call(function(){}),this._boardClearScore+=GameConst.clearScore,this._score=this._clearScore+this._chainScore+this._comboScore+this._boardClearScore,GameBulletinBoard._mypanel.UpdateScore(this._score)}}if(1==GameConst.guide&&GameHelper.IsArriveFastSpeedEndPoint(this._snakeSegment[n-1].Tail())&&(this._snakeSegment[0]._speed=0,this._snakeSegment[0].easeSpeed=0),0==GameConst.guide&&1==this._fastSpeed&&GameHelper.IsArriveFastSpeedEndPoint(this._snakeSegment[n-1].Tail())&&(this._fastSpeed=!1,0==GameConst.guide)){GameBulletinBoard._NPCFire.Begin();for(var o=n-1;o>=0;o--){var r=this._snakeSegment[o];1==r._power&&(r._speed=this.GetFixedSpeed(r))}}1==GameConst.guide&&1==this._fastSpeed&&GameHelper.IsArriveFastSpeedEndPoint(this._snakeSegment[n-1].Tail())&&(this._fastSpeed=!1);for(var m=n-1;m>=0;m--){var _=this._snakeSegment[m];if((0==this._squeezeQueue.length||this._squeezeQueue.length>0&&_._wave!=this._squeezeQueue[0]._wave)&&null!=_){if(_._speed<0&&1==GameConst.guide&&this._guideView.curSubIndex<=5)continue;_.easeSpeed+=(_._speed-_._easeSpeed)*GameConst.ease;var u=_._processIndex+_._easeSpeed*e;if(this._fastSpeed){for(var d=_,c=u;null!=d.Next;)c+=GameConst.ballSpace,d=d.Next;var p=c-GameBulletinBoard.MapConfig.FastSpeedEndPoint;p>0&&(u-=p)}for(_._processIndex=u;null!=_.Next;)_.Next._wave=_._wave,_.Next._originSpeed=_._originSpeed,_.Next._speed=_._speed,_.Next.easeSpeed=_._easeSpeed,_.Next._processIndex=_._processIndex+GameConst.ballSpace,_=_.Next}}}},t.prototype.CheckEliminateDoBack=function(){for(var e=!1,t=this._eliminateQueueDoBack.length;t-->0;){var a,i,n=this._eliminateQueueDoBack[t];if(n.TheSameColorQueue(a,i)>=3||2==n.TheSameColorQueue(a,i)&&8==n._type){a=GameConst._pre,i=GameConst._next,this._combo++,1==GameConst.worldBallEffect?(e=!0,i._isPlayEffect=Ball.EFFECT_END,this.createBPBall(i._type.toString(),i._gameObject.x,i._gameObject.y)):this._eliminateEffectQueue.push(i),i._isNextDelete=!0;do null==a||a.IsDestroy()||(1==GameConst.worldBallEffect?(a._isPlayEffect=Ball.EFFECT_END,this.createBPBall(a._type.toString(),a._gameObject.x,a._gameObject.y)):this._eliminateEffectQueue.push(a),a._isNextDelete=!0,a=a.Next);while(a!=i);11==GameConst.guide}else 1==n._insert&&this.ClearComboCount();n._insert=0}if(this._eliminateQueueDoBack.length=0,this._eliminateEffectQueue.length>0){for(var s=this._eliminateEffectQueue.length,r=null,o=null;s-->0;)o=this._eliminateEffectQueue[s],o._isPlayEffect==Ball.EFFECT_END&&(this._eliminateEffectQueue.splice(this._eliminateEffectQueue.indexOf(o),1),r=o);null!=r&&(e=!0)}if(e)for(var l=this._snakeSegment.length;l-->0;){var h=this._snakeSegment[l],m=h.Head(),_=h.Tail(),u=0,d=0,c=0,p=0;this._itemTypeList.length=0;var g=!0,f=!1,C=0,B=0;do{if(h._isNextDelete&&h._isPlayEffect==Ball.EFFECT_END){if(f=!0,null!=h.Pre&&h.Pre.SetNext(null),null!=h.Next)if(h.Next.SetPre(null),h.Next._power=h._power,1==h._power)h.Next._speed=h._speed,h.Next.easeSpeed=h._easeSpeed,this._snakeSegment[l]=h.Next;else{var n=h.Next;for(n._speed>=GameConst.queueBackSpeed&&(n._speed=0),n._easeSpeed>(GameConst.defaultMoveSpeed+GameConst.waveExtreSpeedRatio)*GameConst.beforeFailureSpeedRatio&&(n.easeSpeed=GameConst.defaultMoveSpeed*(this._beforeFailure?GameConst.beforeFailureSpeedRatio:1));null!=n.Next;)n.Next._speed=n._speed,n.Next.easeSpeed=n._easeSpeed,n=n.Next}h==m&&(m=null),h==_&&(_=null),-1!=h._itemType&&(0==h._itemType&&-1==this._itemTypeList.indexOf(h._itemType)||1==h._itemType&&-1==this._itemTypeList.indexOf(h._itemType)||2==h._itemType)&&this._itemTypeList.push(h._itemType),g&&(g=!1,u=h._gameObject.x,c=h._gameObject.x,d=h._gameObject.y,p=h._gameObject.y),h._gameObject.x<u&&(u=h._gameObject.x),h._gameObject.x>c&&(c=h._gameObject.x),h._gameObject.y<d&&(d=h._gameObject.y),h._gameObject.y>p&&(p=h._gameObject.y),B>0&&(B=B<h._wave?B:h._wave),h._power>0&&0==B&&(B=h._wave),C+=GameConst.score,this._clearScore+=GameConst.score,this._labelType=h._type,this._labelPos.x=u+.5*(c-u),this._labelPos.y=d+.5*(p-d),h._gameObject.parent.removeChild(h._gameObject)}h=h.Next}while(null!=h);if(f){this._oldChain!=this._chain&&0!=this._chain,this._oldCombo=this._combo,C+=GameConst.comboScore,this._comboScore+=GameConst.comboScore,this.PlayXiaoqiuSound(),this.DoBackTest(e,l,m,_),null!=m?null!=_&&m!=_.Head()&&this._snakeSegment.splice(l+1,0,_.Head()):null!=_?(_=_.Head(),this._snakeSegment[l]=_):this._snakeSegment.splice(l,1),this._score=this._clearScore+this._chainScore+this._comboScore+this._boardClearScore,GameBulletinBoard._mypanel.UpdateScore(this._score),this.createPiaoText(this._labelType,C,this._labelPos.x,this._labelPos.y,this._combo);for(var y=this._snakeSegment.length,G=null;y-->0;){var n=this._snakeSegment[y];null!=G&&G._wave!=n._wave&&B==G._wave&&0==G._power?(G._power=1,G._speed=this.GetFixedSpeed(G)):G=n}this._itemTypeList.sort(this.Compare);for(var t=this._itemTypeList.length-1;t>=0;t--)switch(this._itemTypeList[t]){case 0:this.CheckBallBack();break;case 1:this.CheckBallPause();break;case 2:this.AddGameTime()}GameBulletinBoard._NPCFire.RefreshColor(),this.CheckClearBall()}}},t.prototype.Back=function(){this.daojusoundChannel=this.daojuPauseBacksound.play(0,1);for(var e=this._snakeSegment.length,t=e-1;t>=0;t--){var a=this._snakeSegment[t];a._speed=GameConst.queueBackSpeed}},t.prototype.ResumeBack=function(){for(var e=this._snakeSegment.length,t=e-1;t>=0;t--){var a=this._snakeSegment[t];1==a._power?a._speed=this.GetFixedSpeed(a):a._speed>=GameConst.queueBackSpeed&&(a._speed=0)}},t.prototype.Pause=function(){this.daojusoundChannel=this.daojuPauseBacksound.play(0,1);for(var e=this._snakeSegment.length,t=e-1;t>=0;t--){var a=this._snakeSegment[t];1==a._power&&(a._speed=0)}},t.prototype.ResumePause=function(){for(var e=this._snakeSegment.length,t=e-1;t>=0;t--){var a=this._snakeSegment[t];1==a._power&&a._speed>=0&&(a._speed=this.GetFixedSpeed(a))}},t.prototype.createBPBall=function(e,t,a){var i=this.createBPFpsAnimation(e);i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this._mypanel.mapinfo.addChild(i),i.$setScaleX(GameConst.ballScale),i.$setScaleY(GameConst.ballScale),i.$setX(t),i.$setY(a)},t.prototype.createPiaoText=function(e,t,a,i,n){var s=this,r=new egret.TextField;switch(r.textAlign=egret.HorizontalAlign.CENTER,e){case 0:r.textColor=9109504;break;case 1:r.textColor=16776960;break;case 2:r.textColor=11393254;break;case 3:r.textColor=64154;break;case 4:r.textColor=8388736;break;case 5:r.textColor=16777215;break;case 6:r.textColor=0;break;case 8:r.textColor=0}n>0?(r.text="+"+t.toString(),r.text+="\nCombo x "+n):r.text="+"+t.toString(),r.strokeColor=0,r.stroke=2,this._mypanel.mapinfo.addChild(r),r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.$setX(a),r.$setY(i),egret.Tween.get(r).to({y:r.y-30},500,egret.Ease.sineIn).to({alpha:0},500).call(function(){return s.TextTweenCom(r)})},t.prototype.createItemtimePiaoText=function(e,t,a,i){var n=this,s=new egret.TextField;switch(s.size=30,e){case 0:s.textColor=9109504;break;case 1:s.textColor=16776960;break;case 2:s.textColor=11393254;break;case 3:s.textColor=64154;break;case 4:s.textColor=8388736;break;case 5:s.textColor=16777215;break;case 6:s.textColor=0;break;case 8:s.textColor=0}s.text="+ "+t.toString()+" sec",s.strokeColor=0,s.stroke=2,this._mypanel.mapinfo.addChild(s),s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.$setX(a),s.$setY(i),this.daojusoundChannel=this.daojuTimesound.play(0,1),egret.Tween.get(s).to({x:this._mypanel.time.x,y:this._mypanel.time.y},1200,egret.Ease.sineIn).to({alpha:0},0).call(function(){return n.ItemAddGameTimeCom(s)})},t.prototype.ItemAddGameTimeCom=function(e){e.parent&&e.parent.removeChild(e),this.gameTimeLeft+=GameConst.addGameTime},t.prototype.TextTweenCom=function(e){e.parent&&e.parent.removeChild(e)},t.prototype.CheckEliminate=function(){for(var e=!1,t=this._eliminateQueue.length;t-->0;){this.ClearComboCount();var a,i,n=this._eliminateQueue[t];if(n.TheSameColorQueue(a,i)>=3||2==n.TheSameColorQueue(a,i)&&8==n._type){a=GameConst._pre,i=GameConst._next,1==n._insert&&this._chain++,1==GameConst.worldBallEffect?(e=!0,i._isPlayEffect=Ball.EFFECT_END,this.createBPBall(i._type.toString(),i._gameObject.x,i._gameObject.y)):this._eliminateEffectQueue.push(i),i._isNextDelete=!0;do null==a||a.IsDestroy()||(1==GameConst.worldBallEffect?(a._isPlayEffect=Ball.EFFECT_END,this.createBPBall(a._type.toString(),a._gameObject.x,a._gameObject.y)):this._eliminateEffectQueue.push(a),a._isNextDelete=!0,a=a.Next);while(a!=i);11==GameConst.guide}else 1==n._insert&&(this.ClearChainCount(),this.ClearComboCount());n._insert=0}if(this._eliminateQueue.length=0,this._eliminateEffectQueue.length>0){for(var s=this._eliminateEffectQueue.length,r=null,o=null;s-->0;)o=this._eliminateEffectQueue[s],o._isPlayEffect==Ball.EFFECT_END&&(this._eliminateEffectQueue.splice(this._eliminateEffectQueue.indexOf(o),1),r=o);null!=r&&(e=!0)}if(e)for(var l=this._snakeSegment.length;l-->0;){var h=this._snakeSegment[l],m=h.Head(),_=h.Tail(),u=0,d=0,c=0,p=0;this._itemTypeList.length=0;var g=!0,f=!1,C=0,B=0;do{if(h._isNextDelete&&h._isPlayEffect==Ball.EFFECT_END){if(f=!0,null!=h.Pre&&h.Pre.SetNext(null),null!=h.Next)if(h.Next.SetPre(null),h.Next._power=h._power,1==h._power)h.Next._speed=h._speed,h.Next.easeSpeed=h._easeSpeed,this._snakeSegment[l]=h.Next;else{var n=h.Next;for(n._speed>=GameConst.queueBackSpeed&&(n._speed=0),n._easeSpeed>(GameConst.defaultMoveSpeed+GameConst.waveExtreSpeedRatio)*GameConst.beforeFailureSpeedRatio&&(n.easeSpeed=GameConst.defaultMoveSpeed*(this._beforeFailure?GameConst.beforeFailureSpeedRatio:1));null!=n.Next;)n.Next._speed=n._speed,n.Next.easeSpeed=n._easeSpeed,n=n.Next}h==m&&(m=null),h==_&&(_=null),-1!=h._itemType&&(0==h._itemType&&-1==this._itemTypeList.indexOf(h._itemType)||1==h._itemType&&-1==this._itemTypeList.indexOf(h._itemType)||2==h._itemType)&&this._itemTypeList.push(h._itemType),g&&(g=!1,u=h._gameObject.x,c=h._gameObject.x,d=h._gameObject.y,p=h._gameObject.y),h._gameObject.x<u&&(u=h._gameObject.x),h._gameObject.x>c&&(c=h._gameObject.x),h._gameObject.y<d&&(d=h._gameObject.y),h._gameObject.y>p&&(p=h._gameObject.y),B>0&&(B=B<h._wave?B:h._wave),h._power>0&&0==B&&(B=h._wave),C+=GameConst.score,this._clearScore+=GameConst.score,this._labelType=h._type,this._labelPos.x=u+.5*(c-u),this._labelPos.y=d+.5*(p-d),h._gameObject.parent.removeChild(h._gameObject)}h=h.Next}while(null!=h);if(f){this._oldChain!=this._chain&&0!=this._chain&&(this._oldChain=this._chain,C+=(this._chain-1)*GameConst.chainScore,this._chainScore+=(this._chain-1)*GameConst.chainScore),this.PlayXiaoqiuSound(),this.DoBackTest(e,l,m,_),null!=m?null!=_&&m!=_.Head()&&this._snakeSegment.splice(l+1,0,_.Head()):null!=_?(_=_.Head(),this._snakeSegment[l]=_):this._snakeSegment.splice(l,1),this._score=this._clearScore+this._chainScore+this._comboScore+this._boardClearScore,GameBulletinBoard._mypanel.UpdateScore(this._score),GameBulletinBoard._mypanel.ShowBallScore(this._chain),this.createPiaoText(this._labelType,C,this._labelPos.x,this._labelPos.y,this._combo);for(var y=this._snakeSegment.length,G=null;y-->0;){var n=this._snakeSegment[y];null!=G&&G._wave!=n._wave&&B==G._wave&&0==G._power?(G._power=1,G._speed=this.GetFixedSpeed(G)):G=n}this._itemTypeList.sort(this.Compare);for(var t=this._itemTypeList.length-1;t>=0;t--)switch(this._itemTypeList[t]){case 0:this.CheckBallBack();break;case 1:this.CheckBallPause();break;case 2:this.AddGameTime()}GameBulletinBoard._NPCFire.RefreshColor(),this.CheckClearBall()}}},t.prototype.CheckClearBall=function(){if(this._startGame){for(var e=this._snakeSegment.length;e-->0;){var t=this._snakeSegment[e];if(null!=t)return}if(this._currentCount<this._ballDynamicTotalCount)return this._currentCount++,void this.ContinueCreateBall();if(1==GameConst.guide&&(this._currentCount=1,this._guideIndex++,this._guideIndex<3))switch(this._ballDynamicTotalCount=GuideMgr.ins()._guide[this._guideIndex].length,this.ContinueCreateBall(),this._guideIndex){case 1:case 2:}11==GameConst.guide,12==GameConst.guide,0==GameConst.guide&&(this._wave<GameConst.finalWave?this.WaveStart():this.GameClear())}},t.prototype.GameClear=function(){this._gameState=GameState.beginEnvirment,this._score=this._clearScore+this._chainScore+this._comboScore+this._boardClearScore+GameConst.gameClearBonus,GameBulletinBoard._mypanel.UpdateScore(this._score),this._endGame=!0,GameConst.isSDK,this._endGame=!0,GameBulletinBoard._NPCFire.Lose(),this.gameTimeDely.stop(),this._myResumePause.hide();var e=this.createBitmapByName("gameoverFinishTuji_json.gameclear_chao");e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this.addChild(e),e.x=this._mypanel.mapinfo.width/2,e.y=this._mypanel.mapinfo.height/2,e.$setScaleX(.6),e.$setScaleY(.6),egret.Tween.get(e).wait(1e3).to({alpha:0},500).call(function(){GameBulletinBoard._GameOverUI.showAllClear(),GameBulletinBoard.GameManager.showGameOverUI(),removeFromParant(e)})},t.prototype.CheckBallBack=function(){var e=this.createBitmapByName("texiaoPngTuji_json.reverse");e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this.addChild(e),e.x=this._mypanel.mapinfo.width/2,e.y=this._mypanel.mapinfo.height/2,e.$setScaleX(.6),e.$setScaleY(.6);var t=e.y-180;egret.Tween.get(e).wait(600).to({y:t,alpha:0},1200,egret.Ease.circIn).call(function(){});var a=this._snakeSegment.length;0!=a&&(this.Back(),this.DJBackTimeDely=new egret.Timer(1e3,GameConst.queueBackTime),this.DJBackTimeDely.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.DJBackgameTimerComFunc,this),this.DJBackTimeDely.start())},t.prototype.CheckBallPause=function(){var e=this.createBitmapByName("gameoverFinishTuji_json.freeze");e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this.addChild(e),e.x=this._mypanel.mapinfo.width/2,e.y=this._mypanel.mapinfo.height/2,e.$setScaleX(.6),e.$setScaleY(.6);var t=e.y-180;egret.Tween.get(e).wait(600).to({y:t,alpha:0},1200,egret.Ease.circIn).call(function(){}),this.Pause(),this.DJPauseTimeDely=new egret.Timer(1e3,GameConst.queuePauseTime),this.DJPauseTimeDely.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.DJPausegameTimerComFunc,this),this.DJPauseTimeDely.start()},t.prototype.AddGameTime=function(){this.createItemtimePiaoText(1,GameConst.addGameTime,this._labelPos.x,this._labelPos.y)},t.prototype.Compare=function(e,t){return t>e?-1:e>t?1:0},t.prototype.ClearChainCount=function(){this._chain=0,GameBulletinBoard._mypanel.ClearChainCount()},t.prototype.ClearComboCount=function(){this._combo=0},t.prototype.UpdateBallRender=function(){for(var e=this._snakeSegment.length;e-->0;)for(var t=this._snakeSegment[e];null!=t;)t.UpdateBall(this._tick),t=t.Next},t.prototype.CheckFireBallCross=function(e){if(!this._endGame)for(var t=GameBulletinBoard._FireBallManager.GetActiveFireList(),a=t.length;a-->0;)for(var i=t[a],n=null,s=this._snakeSegment.length;s-->0;){var r=this._snakeSegment[s];if(null!=r)do{if(GameBulletinBoard._FireBallManager.IsCross(new egret.Point(i._gameObject.x,i._gameObject.y),r.GetPosition(),GameConst.realBallSpace)&&null==n){n=i,-1!=t.indexOf(i)&&t.splice(t.indexOf(i),1),this._squeezeFireQueue.push(i),this._squeezeFireQueue.push(r),this._squeezeQueue.length=0;var o=r._processIndex-GameConst.ballSpace,l=r._processIndex+GameConst.ballSpace,h=egret.Point.distance(new egret.Point(i._gameObject.x,i._gameObject.y),GameBulletinBoard.MapConfig.GetPoint(o)),m=egret.Point.distance(new egret.Point(i._gameObject.x,i._gameObject.y),GameBulletinBoard.MapConfig.GetPoint(l));h>=m?(i._gameObject.name=r._gameObject.name+"_R",null!=r.Next&&(r.Next._squeezeTarget=r.Next._processIndex+GameConst.ballSpace,this._squeezeQueue.push(r.Next)),i._processIndex=r._processIndex,i.SetPre(r),i.SetNext(r.Next),null!=r.Next&&r.Next.SetPre(i),r.SetNext(i)):(i._gameObject.name=r._gameObject.name+"_L",r._squeezeTarget=r._processIndex+GameConst.ballSpace,null!=r.Pre&&this._squeezeQueue.push(r),i._processIndex=r._processIndex,i.SetPre(r.Pre),i.SetNext(r),null!=r.Pre?r.Pre.SetNext(i):this._snakeSegment[s]=i,r.SetPre(i)),i._gameObject.getChildByName("ball_mc").play(-1);var _=null;if(null!=i.Pre&&null!=i.Next&&i.Pre._type!=i._type&&i.Next._type==i._type&&null==i.Next.Next||null!=i.Pre&&null!=i.Pre.Pre&&i.Pre.Pre._type!=i.Pre._type&&i.Pre._type==i._type&&null==i.Next||null==i.Pre&&null!=i.Next&&i.Next._type==i._type&&null==i.Next.Next||null!=i.Pre&&null==i.Next&&i.Pre._type==i._type&&null==i.Pre.Pre){if(this._tagList.length=0,null==i.Next?this._tagList.push(i.Pre):this._tagList.push(i.Next),_=this.FindNextSegmentBall(i.Tail()),null!=_&&_._type==i._type)for(this._tagList.push(_);null!=_.Next&&_._type==_.Next._type;)_=_.Next,this._tagList.push(_)}else if((null!=i.Pre&&null!=i.Next&&i.Next._type!=i._type&&i.Pre._type==i._type&&null==i.Pre.Pre||null!=i.Next&&null!=i.Next.Next&&i.Next.Next._type!=i.Next._type&&i.Next._type==i._type&&null==i.Pre||null==i.Pre&&null!=i.Next&&i.Next._type==i._type&&null==i.Next.Next||null!=i.Pre&&null==i.Next&&i.Pre._type==i._type&&null==i.Pre.Pre)&&(this._tagList.length=0,null==i.Pre?this._tagList.push(i.Next):this._tagList.push(i.Pre),_=this.FindPreSegmentBall(i.Head()),null!=_&&_._type==i._type))for(this._tagList.push(_);null!=_.Pre&&_._type==_.Pre._type;)_=_.Pre,this._tagList.push(_);i._originSpeed=r._originSpeed,i.easeSpeed=r._easeSpeed,i._speed=r._speed,i._wave=r._wave,null==i.Pre&&null!=i.Next&&(i._processIndex=r._processIndex-GameConst.ballSpace,i._power=i.Next._power,i.Next._power=0,s>0&&this.DoBackTest(!1,s,this._snakeSegment[s-1],i)),i.Pre&&i._gameObject.parent&&i.Pre._gameObject.parent.addChildAt(i._gameObject,i.Pre._gameObject.parent.getChildIndex(i.Pre._gameObject)),null!=i.Pre&&null==i.Next&&s+1<=this._snakeSegment.length-1&&this.DoBackTest(!1,s,i,this._snakeSegment[s+1]);break}r=r.Next}while(null!=r)}},t.prototype.CheckFireSqueeze=function(){if(!this._endGame)for(var e=0;e<this._squeezeFireQueue.length;){var t=this._squeezeFireQueue[e],a=this._squeezeFireQueue[e+1];if(t.IsDestroy()||a.IsDestroy())t.IsDestroy()||(t._insert=0),this._squeezeFireQueue.splice(this._squeezeFireQueue.indexOf(t),1),this._squeezeFireQueue.splice(this._squeezeFireQueue.indexOf(a),1);else{if(8==t._type){if(null!=t.Pre)for(var i=t.Pre._type,n=t.Pre;8!=i&&n._type==i&&null!=n;)n._type=8,null!=n.Pre&&(n=n.Pre);if(null!=t.Next)for(var s=t.Next._type,r=t.Next;8!=s&&r._type==s&&null!=r;)r._type=8,null!=r.Next&&(r=r.Next)}var o=!1,l=a._processIndex-GameConst.ballSpace,h=a._processIndex+GameConst.ballSpace,m=egret.Point.distance(new egret.Point(t._gameObject.x,t._gameObject.y),GameBulletinBoard.MapConfig.GetPoint(l)),_=egret.Point.distance(new egret.Point(t._gameObject.x,t._gameObject.y),GameBulletinBoard.MapConfig.GetPoint(h));if(++t._insertIndex,m>=_){var u=egret.Point.interpolate(GameBulletinBoard.MapConfig.GetPoint(h),new egret.Point(t._gameObject.x,t._gameObject.y),t._insertIndex/t._insertTotalIndex);t._gameObject.x=u.x,t._gameObject.y=u.y,t._insertIndex==t._insertTotalIndex&&(t._gameObject.x=GameBulletinBoard.MapConfig.GetPoint(h).x,t._gameObject.y=GameBulletinBoard.MapConfig.GetPoint(h).y,o=!0)}else{var u=egret.Point.interpolate(GameBulletinBoard.MapConfig.GetPoint(l),new egret.Point(t._gameObject.x,t._gameObject.y),t._insertIndex/t._insertTotalIndex);t._gameObject.x=u.x,t._gameObject.y=u.y,t._insertIndex==t._insertTotalIndex&&(t._gameObject.x=GameBulletinBoard.MapConfig.GetPoint(l).x,t._gameObject.y=GameBulletinBoard.MapConfig.GetPoint(l).y,o=!0)}o&&(this._squeezeFireQueue.splice(this._squeezeFireQueue.indexOf(t),1),this._squeezeFireQueue.splice(this._squeezeFireQueue.indexOf(a),1),this._eliminateQueue.push(t)),e+=2}}},t.prototype.CheckInScene=function(){for(var e=this._snakeSegment.length;e-->0;)for(var t=this._snakeSegment[e];null!=t;)GameHelper.IsArriveInScenePoint(t)?t._isInScene=!0:t._isInScene=!1,0==GameConst.guide&&this._oldMaxWave<t._wave&&t._isInScene&&(this._oldMaxWave=t._wave,GameBulletinBoard._mypanel.ShowWave(this._oldMaxWave)),t=t.Next},t.prototype.CheckSqueeze=function(e){for(var t=this._squeezeQueue.length;t-->0;){var a=this._squeezeQueue[t];for(a._processIndex+=.008*e,a._processIndex>a._squeezeTarget&&(a._processIndex=a._squeezeTarget,this._squeezeQueue.splice(t,1));null!=a.Next;)a.Next._speed=a._speed,a.Next.easeSpeed=a._easeSpeed,a.Next._processIndex=a._processIndex+GameConst.ballSpace,a=a.Next}},t.prototype.CheckSnakeConnect=function(){for(var e=this._snakeSegment.length;e-->1;){var t=this._snakeSegment[e],a=this._snakeSegment[e-1],i=a.Tail();null!=t&&i._processIndex+GameConst.ballSpace>t._processIndex&&(t._processIndex=i._processIndex+GameConst.ballSpace,i.SetNext(t),t.SetPre(i),t._easeSpeed<0&&(i.Head().easeSpeed=t._easeSpeed),this.UpdateBallConnectDistance(t),this._snakeSegment.splice(e,1))
}},t.prototype.UpdateBallConnectDistance=function(e){for(e._power=0;null!=e;)null!=e.Next&&(e.Next._speed=e._speed,e.Next.easeSpeed=e._easeSpeed,e.Next._processIndex=e._processIndex+GameConst.ballSpace),e=e.Next},t.prototype.CheckFallBackBall=function(e){for(var t=this._fallbackQueue.length;t-->0;){var a=this._fallbackQueue[t];null!=a&&(a.IsDestroy()||null!=a.BallTowards&&a.BallTowards.IsDestroy())?(a.BallTowards=null,a._speed=1==a._power?this.GetFixedSpeed(a):0,this._fallbackQueue.splice(t,1)):null!=a&&null!=a.BallTowards&&a._processIndex<=a.BallTowards._processIndex+GameConst.ballSpace&&(a.easeSpeed*=.5,a.BallTowards.Head().easeSpeed=a._easeSpeed,this._eliminateQueueDoBack.push(a),this._fallbackQueue.splice(t,1),12==GameConst.guide)}},t.prototype.DoBackTest=function(e,t,a,i){var n=this,s=null;if(null!=a?s=a.Tail():t>0&&(s=this._snakeSegment[t-1].Tail()),null!=s){var r=null;null!=i?r=i.Head():t+1<=this._snakeSegment.length-1&&(r=this._snakeSegment[t+1]),null!=r&&(1==s._isInScene&&(e&&s._type==r._type||!e&&s._type==r._type&&s._wave==r._wave)?(r.easeSpeed=GameConst.fallBackWaitDelaySpeed,1==GameConst.guide,egret.setTimeout(function(){r.BallTowards=s,r._speed=GameConst.fallBackSpeed,n._fallbackQueue.push(r)},this,200)):1==s._isInScene&&!e&&s._type==r._type&&s._wave!=r._wave&&r._speed<0?r.BallTowards=s:-1!=this._fallbackQueue.indexOf(r)?(r.BallTowards=null,r._speed=1==r._power?this.GetFixedSpeed(r):0,this._fallbackQueue.splice(this._fallbackQueue.indexOf(r),1)):-1!=this._fallbackQueue.indexOf(r.Next)&&(r.BallTowards=null,r._speed=1==r._power?this.GetFixedSpeed(r):0,this._fallbackQueue.splice(this._fallbackQueue.indexOf(r.Next),1)))}},t.prototype.FindPreSegmentBall=function(e){var t=null,a=0,i=this._snakeSegment.length;if(null==e.Pre)for(;i>a;){var n=this._snakeSegment[a];if(n==e&&a>0)return t=this._snakeSegment[a-1].Tail(),1==t._isInScene?t:null;a++}return null},t.prototype.FindNextSegmentBall=function(e){var t=null,a=0,i=this._snakeSegment.length;if(null==e.Next)for(;i>a;){var n=this._snakeSegment[a].Tail();if(n==e&&a<this._snakeSegment.length-1)return t=this._snakeSegment[a+1],1==t._isInScene?t:null;a++}return null},t.prototype.TutorialStartGame=function(e){void 0===e&&(e=0),this.ClearBalls(),this._wave=1,this._isComplete321Time=!1,this._endGame=!1,this._oldMaxWave=0,this._startGame=!1,this.beforeFailure=!1,this._fastSpeed=!1,this._myFireBallManager.clearAllBallQueue(),this._guideIndex=0,this._currentCount=0,this._showDangerous=!1,this._delayGameOver=!1,this._isComplete321Time=!1,0==e&&this.DaoJiTime(),GameConst.isSDK,GameConst.guide=e,this._gameTime=GameConst.gameTime,this._guideIndex=0,this._wave=1,this._score=0,this._clearScore=0,this._chainScore=0,this._comboScore=0,this._boardClearScore=0,GameBulletinBoard._mypanel.UpdateScore(this._score),1==e&&(this._guideView.curSubIndex=0,this._guideView.showGuide()),this.PreStartGameInit()},t.prototype.PreStartGameInit=function(){this._firedRainbowBall=!0,this._rainbowCount=GameConst.rainbowCount,GameBulletinBoard._mypanel.UpdateRainbowCount(this._rainbowCount),0==GameConst.guide,1==GameConst.guide,11==GameConst.guide,12==GameConst.guide,this.ClearChainCount(),this.ClearComboCount(),this.PreStartGame(),GameBulletinBoard._mypanel.ShowWave(0)},t.prototype.PreStartGame=function(){0==GameConst.guide&&(this._ballDynamicTotalCount=GameConst.ballTotalCount,GameBulletinBoard._NPCFire.flyInScene()),1==GameConst.guide&&(this._ballDynamicTotalCount=GuideMgr.ins()._guide[this._guideIndex].length),11==GameConst.guide,12==GameConst.guide,this.StartGame()},t.prototype.GuideWait=function(){1==GameConst.guide&&this.Pause(),GameBulletinBoard._NPCFire.Begin(),1==GameConst.guide,11==GameConst.guide,12==GameConst.guide},t.prototype.StartGame=function(){this.PlayMusic()},t.prototype.PlayMusic=function(){this.music&&(this.musicChannel||(this.musicChannel=this.music.play()),this.musicChannel.volume=1)},t.prototype.StopMusic=function(){this.music&&this.musicChannel&&(this.musicChannel.volume=0)},t.prototype.PlaySound=function(){this.fashesoundChannel=this.fashesound.play(0,1)},t.prototype.PlayXiaoqiuSound=function(){switch(this._combo){case 0:this.xiaoqiusoundChannel=this.combo1xiaoqiusound.play(0,1);break;case 1:this.xiaoqiusoundChannel=this.combo2xiaoqiusound.play(0,1);break;case 2:this.xiaoqiusoundChannel=this.combo3xiaoqiusound.play(0,1);break;case 3:this.xiaoqiusoundChannel=this.combo4xiaoqiusound.play(0,1);break;default:this.xiaoqiusoundChannel=this.combo4xiaoqiusound.play(0,1)}},t.prototype.PlayNPCSound=function(){this.NPCsoundChannel=this.NPCsound.play(0,1)},t.prototype.ClearBalls=function(){for(var e=this._snakeSegment.length;e-->0;){var t=this._snakeSegment[e],a=t.Tail();if(null!=a)do null!=a.Pre?a.Pre.SetNext(null):this._snakeSegment.splice(e,1),a._gameObject.parent&&a._gameObject.parent.removeChild(a._gameObject),a=a.Pre;while(null!=a)}this._snakeSegment=[]},t.prototype.CreateActiveBall=function(){var e=null;return 0==GameConst.guide?0==this._cacheQueue.length&&(this._isCache?this._isCache=!1:(GameConst.ballType=GameBulletinBoard.GameBallTypeStrategy(),GameConst.ballItemType=GameBulletinBoard.GameBallItemTypeStrategy(this._currentCount,this._ballDynamicTotalCount),e=this.NewInstanceBall(GameConst.ballType,GameConst.ballItemType).OnInit(GameConst.ballType,GameConst.ballItemType))):e=GuideMgr.ins()._guide[this._guideIndex][this._currentCount-1],null!=e&&(e._index=GameConst._currentBallName,GameConst._currentBallName++),e},t.prototype.ContinueCreateBall=function(){var e=this.CreateActiveBall();e._wave=this._wave,e._power=1,e._insert=0,0==GameConst.guide&&(e._originSpeed=this.GetOriginSpeed(),e._speed=this._fastSpeed?GameConst.fastSpeed:this.GetFixedSpeed(e),e.easeSpeed=e._speed,e._processIndex=GameBulletinBoard.MapConfig.StartPoint),1==GameConst.guide&&(e._originSpeed=GameConst.guideSpeed,e._speed=GameConst.guideSpeed,e.easeSpeed=GameConst.guideSpeed,e._processIndex=GameBulletinBoard.MapConfig.GuideStartPoint),11==GameConst.guide,12==GameConst.guide,this._snakeSegment.splice(0,0,e)},t.prototype.CheckBallInEndPoint=function(){var e=this._snakeSegment.length>0?this._snakeSegment[this._snakeSegment.length-1]:null;0==this._delayGameOver&&(this._eliminateQueue.length>0||this._squeezeQueue.length>0||this._eliminateQueueDoBack.length>0)&&(this._delayGameOver=!0,this.DestoryFromTailEnumerator()),0==this._delayGameOver&&this.DestroyFromTail(e)},t.prototype.DestoryFromTailEnumerator=function(){this._delayGameOver=!1},t.prototype.DestroyFromTail=function(e){if(null!=e&&GameHelper.IsArriveFailurePoint(e.Tail())){this.CheckFailureGame(GameConst.failureSpeed);var t=e.Tail();if(null!=t){null!=t.Pre?t.Pre.SetNext(null):this._snakeSegment.length>0&&this._snakeSegment.splice(this._snakeSegment.length-1,1);do t._gameObject.parent&&t._gameObject.parent.removeChild(t._gameObject),t=t.Next;while(null!=t);0==this._snakeSegment.length&&this.FailureGame()}}else if(null!=e&&!this._endGame&&!this._beforeFailure){for(var a=this._snakeSegment.length;a-->0;){var i=this._snakeSegment[a];if(1==i._power){GameHelper.IsArriveBeforeFailurePoint(i.Tail())&&(this.beforeFailure=!0);break}}if(this._beforeFailure)for(var a=this._snakeSegment.length;a-->0;){var i=this._snakeSegment[a];1==i._power&&(i._speed=this.GetFixedSpeed(i))}}},t.prototype.showGameOverUI=function(){var e=this;if(GuideMgr.ins().hasGuided())return void this._guideView.endGuideAndBegin();this._myNPCFire.resetEndGameffect(!0),GameConst.duizhanchaoshi?(GameBulletinBoard._GameOverUI.clearScore.text="0",GameBulletinBoard._GameOverUI.comboScore.text="0",GameBulletinBoard._GameOverUI.chainScore.text="0",GameBulletinBoard._GameOverUI.boardClearScore.text="0",GameBulletinBoard._GameOverUI.FinalScore.text="0",GameBulletinBoard.GameManager._score=0,GameBulletinBoard._mypanel.score.text="0"):(GameBulletinBoard._GameOverUI.clearScore.text=this._clearScore.toString(),GameBulletinBoard._GameOverUI.comboScore.text=this._comboScore.toString(),GameBulletinBoard._GameOverUI.chainScore.text=this._chainScore.toString(),GameBulletinBoard._GameOverUI.boardClearScore.text=this._boardClearScore.toString(),GameBulletinBoard._GameOverUI.FinalScore.text=this._score.toString());var t=this._myGameOverUI.y;this.addChild(this._myGameOverUI),this._myGameOverUI.y=this._myGameOverUI.y-800,this._myGameOverUI.show(),egret.Tween.get(this._myGameOverUI).to({y:t},1200,egret.Ease.backOut).call(function(){return e.GameOverUITweenCom()})},t.prototype.GameOverUITweenCom=function(){},t.prototype.CheckFailureGame=function(e){if(void 0===e&&(e=0),!this._endGame){this._endGame=!0,GameBulletinBoard._NPCFire.Lose(),this.gameTimeDely.stop(),this._myResumePause.hide();var t=this.createBitmapByName("gameoverFinishTuji_json.game_Over");t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.addChild(t),t.x=this._mypanel.mapinfo.width/2,t.y=this._mypanel.mapinfo.height/3,t.$setScaleX(.6),t.$setScaleY(.6),egret.Tween.get(t).wait(1e3).to({alpha:0},500).call(function(){GameBulletinBoard._GameOverUI.showGameOver(),GameBulletinBoard.GameManager.showGameOverUI(),removeFromParant(t)}),this._failureSpeed=e,GameConst.isSDK,this._failureSpeed>0;for(var a=this._snakeSegment.length;a-->0;){var i=this._snakeSegment[a];i.BallTowards=null,i._speed=e,i.easeSpeed=e}}},t.prototype.FailureGame=function(){this._gameState=GameState.beginEnvirment},t.prototype.GetOriginSpeed=function(){var e=GameConst.defaultMoveSpeed+this._wave*GameConst.waveExtreSpeedRatio;return e=e<GameConst.maxSpeed?e:GameConst.maxSpeed},t.prototype.GetFixedSpeed=function(e){var t=e._originSpeed;return this._beforeFailure&&(t*=GameConst.beforeFailureSpeedRatio),t},t.prototype.WaveStart=function(){this._currentCount=1,this._wave++,this.ContinueCreateBall()},t.prototype.NewInstanceBall=function(e,t){var a=new egret.Sprite;a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2;var i=new eui.Image("texiaoPngTuji_json.shadow");i.anchorOffsetX=45,i.anchorOffsetY=40,i.rotation=45,i.scaleX=i.scaleY=1.2*GameConst.ballScale;var n=new eui.Image("ball_shadow_png");n.anchorOffsetX=55,n.anchorOffsetY=55,n.scaleX=n.scaleY=GameConst.ballScale,n.alpha=.8;var s=this.createFpsAnimation(e.toString());switch(s.name="ball_mc",t){case 0:var r=this.createBitmapByName("texiaoPngTuji_json.back");break;case 1:var r=this.createBitmapByName("texiaoPngTuji_json.pause");break;case 2:var r=this.createBitmapByName("texiaoPngTuji_json.time")}r&&(r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.$setRotation(180),r.$setScaleX(.6),r.$setScaleY(.6)),a.addChild(i),a.addChild(s),a.addChild(n),r&&a.addChild(r),this._mypanel.mapinfo.addChild(a),s.$setScaleX(GameConst.ballScale),s.$setScaleY(GameConst.ballScale),s.$setVisible(!0),a.$setVisible(!0),GameConst.realBallSpace=s.width*GameConst.ballScale;var o=new Ball(a);return o},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.startCreateScene=function(){this.gameTimeDely=new egret.Timer(1e3,0);var e=RES.getRes("BallMovieClip_json"),t=RES.getRes("BallMovieClip_png");this.mcFactory=new egret.MovieClipDataFactory(e,t);var a=RES.getRes("BPMovieClip_json"),i=RES.getRes("BPMovieClip_png");this.BPmcFactory=new egret.MovieClipDataFactory(a,i),this._321dpc=this.createBitmapByName("texiaoPngTuji_json.3");this.stage.stageWidth,this.stage.stageHeight;this.music=RES.getRes("music_mp3"),this.fashesound=RES.getRes("fashe_mp3"),this.combo1xiaoqiusound=RES.getRes("ExplosionNew1_mp3"),this.combo2xiaoqiusound=RES.getRes("ExplosionNew2_mp3"),this.combo3xiaoqiusound=RES.getRes("ExplosionNew3_mp3"),this.combo4xiaoqiusound=RES.getRes("ExplosionNew4_mp3"),this.daojuPauseBacksound=RES.getRes("PowerupEnvironment_mp3"),this.daojuTimesound=RES.getRes("ExtraTime_mp3"),this.NPCsound=RES.getRes("changeNPC_mp3"),this._mypanel=new mypanel,this._myNPCFire=new NPCFire,this._myResumePause=new Pause,this._guideView=new GuideView,GameBulletinBoard._NPCFire.anchorOffsetX=GameBulletinBoard._NPCFire.width/2,GameBulletinBoard._NPCFire.anchorOffsetY=GameBulletinBoard._NPCFire.height/2,this._myGameOverUI=new GameOverUI,this._myFireBallManager=new FireBallManager,this.addChild(this._mypanel),this.addChild(this._myNPCFire),this.addChild(this._guideView),this.addChild(this._myGameOverUI),this.addChild(this._myResumePause);var n=new MapConfig;GameBulletinBoard.SetMapConfig(n),GameBulletinBoard.SetGameManager(this),this._mypanel.name="Panel",this._myNPCFire.name="Hold",this._myResumePause.visible=this._guideView.visible=this._myGameOverUI.visible=!1,GameBulletinBoard.MapConfig.MapInfo=new Array,MapMgr.ins().initNewMap()},t.prototype.createFpsAnimation=function(e,t){void 0===t&&(t=!1);var a=new egret.MovieClip(this.mcFactory.generateMovieClipData("MovieClip"));return a.$setScaleX(GameConst.ballScale),a.$setScaleY(GameConst.ballScale),a.gotoAndPlay((t?"-":"")+e+"fps",-1),a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a},t.prototype.createBPFpsAnimation=function(e){var t=new egret.MovieClip(this.BPmcFactory.generateMovieClipData("BPMovieClip"));return t.$setScaleX(GameConst.ballScale),t.$setScaleY(GameConst.ballScale),t.addEventListener(egret.Event.COMPLETE,function(e){t.parent&&t.parent.removeChild(t)},this),t.gotoAndPlay(e+"fps",1),t},t.prototype.DaoJiTime=function(){this.gameTimeLeft=GameConst.gameTime-1;var e=GameConst.gameTime;GameBulletinBoard._mypanel.progressBar.maximum=e,GameBulletinBoard._mypanel.progressBar.minimum=0,this._306090time=e.toString(),this._mypanel.updateTimeLabel(e),this._321gameTimeLeft=0==GameConst.guide?4:1,this.gameTimeDely.addEventListener(egret.TimerEvent.TIMER,this.gameTimerFunc,this),this.gameTimeDely.start()},t.prototype.gameTimerFunc=function(){var e=this;if(this._isComplete321Time){var t=this._guideView.isGuidePasue()?this.gameTimeLeft:this.gameTimeLeft--;this._306090time=t.toString(),this._mypanel.updateTimeLabel(t),this._321dpc.visible=!1,0>=t&&this.gameTimerComFunc()}switch(this._321daojitime=this._321gameTimeLeft--,this._321daojitime){case 4:this._321dpc.visible=!0,this._321dpc.texture=RES.getRes("texiaoPngTuji_json.3"),this._321dpc.anchorOffsetX=this._321dpc.width/2,this._321dpc.anchorOffsetY=this._321dpc.height/2,this._mypanel.mapinfo.addChild(this._321dpc),this._321dpc.x=this._mypanel.mapinfo.width/2,this._321dpc.y=this._mypanel.mapinfo.height/2;break;case 3:this._321dpc.texture=RES.getRes("texiaoPngTuji_json.2");break;case 2:this._321dpc.texture=RES.getRes("texiaoPngTuji_json.1");break;case 1:this._321dpc&&(this._321dpc.texture=RES.getRes("texiaoPngTuji_json.go"),this._321dpc.anchorOffsetX=this._321dpc.width/2,this._321dpc.anchorOffsetY=this._321dpc.height/2),this._isComplete321Time=!0,this._gameState=GameState.runningTime}switch(this._306090time){case"30":var a=this.createBitmapByName("texiaoPngTuji_json.30s");a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,this._mypanel.mapinfo.addChild(a),a.x=this._mypanel.mapinfo.width+a.width/2,a.y=this._mypanel.mapinfo.height/2.5,a.$setScaleX(.6),a.$setScaleY(.6),egret.Tween.get(a).to({x:this._mypanel.mapinfo.width/2},500,egret.Ease.sineIn).wait(500).to({x:-a.width/2},500,egret.Ease.sineIn).call(function(){return e.PiaoziCom(a)});break;case"60":var a=this.createBitmapByName("texiaoPngTuji_json.60s");a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,this._mypanel.mapinfo.addChild(a),a.x=this._mypanel.mapinfo.width+a.width/2,a.y=this._mypanel.mapinfo.height/2.5,a.$setScaleX(.6),a.$setScaleY(.6),egret.Tween.get(a).to({x:this._mypanel.mapinfo.width/2},500,egret.Ease.sineIn).wait(500).to({x:-a.width/2},500,egret.Ease.sineIn).call(function(){return e.PiaoziCom(a)});break;case"90":var a=this.createBitmapByName("texiaoPngTuji_json.90s");a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,this._mypanel.mapinfo.addChild(a),a.x=this._mypanel.mapinfo.width+a.width/2,a.y=this._mypanel.mapinfo.height/2.5,a.$setScaleX(.6),a.$setScaleY(.6),egret.Tween.get(a).to({x:this._mypanel.mapinfo.width/2},500,egret.Ease.sineIn).wait(500).to({x:-a.width/2},500,egret.Ease.sineIn).call(function(){return e.PiaoziCom(a)})}},t.prototype.PiaoziCom=function(e){e.parent&&e.parent.removeChild(e)},t.prototype.DJBackgameTimerComFunc=function(){this.DJBackTimeDely.stop(),this.ResumeBack()},t.prototype.DJPausegameTimerComFunc=function(){this.DJPauseTimeDely.stop(),this.ResumePause()},t.prototype.gameTimerComFunc=function(){if(!this._endGame){this._gameState=GameState.beginEnvirment,this._endGame=!0,GameBulletinBoard._NPCFire.Lose(),this.gameTimeDely.stop(),this._myResumePause.hide();var e=this.createBitmapByName("gameoverFinishTuji_json.time_Up");e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this.addChild(e),e.x=this._mypanel.mapinfo.width/2,e.y=this._mypanel.mapinfo.height/3,e.$setScaleX(.6),e.$setScaleY(.6),egret.Tween.get(e).wait(1e3).to({alpha:0},500).call(function(){GameBulletinBoard._GameOverUI.showTimesUp(),GameBulletinBoard.GameManager.showGameOverUI(),removeFromParant(e)})}},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,a=RES.getRes(e);return t.texture=a,t},t}(eui.UILayer);__reflect(Main.prototype,"Main");var SingletonClass=function(){function e(){}return e.ins=function(){return this._ins||(this._ins=new this),this._ins},e}();__reflect(SingletonClass.prototype,"SingletonClass");var NPCFire=function(e){function t(){var t=e.call(this)||this;return t._endGame=!1,t._isLock=!1,t._tutorialIndex=-1,t._fireIndex=-1,t._senior1CanFire=!1,t._isTouchState=!1,t._touchPosition=new egret.Point(0,0),t._isCatchBall=!1,t._isChangeBall=!1,t._endEffectInterVal=0,t.skinName="resource/eui_skins/NPCFire.exml",t._angle=new egret.Point,t._xiangLiang=new egret.Point,t._beginRot=new egret.Point(0,0),t._tutorialList=[0,0,2,2],t._senior1TutorialList=[0,0,2,2],t._senior2TutorialList=[1,4,0],t._hold=Main._main._mypanel.canonInfo.getChildByName("Hold"),GameBulletinBoard.SetNPCFire(t),t}return __extends(t,e),t.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),GameBulletinBoard._mypanel.rainbowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.RainbowBall,this)},t.prototype.NPCUpdate=function(){null==this._prepareBall||this._isCatchBall||(this._isCatchBall=!0,this.CreateCatchBall())},t.prototype.RefreshColor=function(){if(0==GameConst.guide){var e=GameBulletinBoard.DanJiGameFireStrategy(),t=GameBulletinBoard.GameFireStrategyList();if(null!=this._prepareBall&&-1==t.indexOf(this._prepareBall._type)&&t.length>0){this._prepareBall._type=e;var a=this._prepareBall._gameObject.getChildByName("ball_mc");a.gotoAndPlay(e+"fps",-1),a.stop(),this._prepareBall.OnInit(e),this._prepareBall._gameObject.x=GameBulletinBoard._NPCFire.prepareBall.x,this._prepareBall._gameObject.y=GameBulletinBoard._NPCFire.prepareBall.y}if(null!=this._catchBall&&-1==t.indexOf(this._catchBall._type)&&8!=this._catchBall._type&&t.length>0){this._catchBall._type=e,GameBulletinBoard.GameManager._typestored=e;var a=this._catchBall._gameObject.getChildByName("ball_mc");a.gotoAndPlay(e+"fps",-1),a.stop(),this._catchBall.OnInit(e),this._catchBall._gameObject.x=GameBulletinBoard._NPCFire.catchBall.x,this._catchBall._gameObject.y=GameBulletinBoard._NPCFire.catchBall.y}for(var i=new Array,n=0;n<i.length;n++);i.length=0}},t.prototype.CreatePrepareBallComplete=function(e){this.RefreshColor()},t.prototype.flyInScene=function(){var e=this;this.resetEndGameffect(!1),this._tutorialIndex=-1,this._catchBall&&removeFromParant(this._catchBall._gameObject),this._prepareBall&&removeFromParant(this._prepareBall._gameObject),this._catchBall=null,this._prepareBall=null,this._isCatchBall=!1,this._isChangeBall=!1,this.GaveDirections(),0==GameConst.guide,1==GameConst.guide&&(GameBulletinBoard.GameManager._myNPCFire.rotation=this._currentRotation=180),11==GameConst.guide,12==GameConst.guide,egret.Tween.get(GameBulletinBoard.GameManager._myNPCFire).to({x:GameBulletinBoard.MapConfig.Canon.x,y:GameBulletinBoard.MapConfig.Canon.y},1e3,egret.Ease.backInOut).call(function(){return e.FlyComplete()})},t.prototype.FlyComplete=function(){this.CreatePrepareBall()},t.prototype.OnFire=function(){if(null!=this._catchBall){MarkDataUtil.markGameActionData(MarkEventId.SHOOT,{desc:"zuma SHOOT",ball_type:this._catchBall._type},!1),GameBulletinBoard.GameManager.PlaySound(),GameBulletinBoard._FireBallManager.OnFire(this._catchBall,this._xiangLiang),8==this._catchBall._type&&(GameBulletinBoard.GameManager._rainbowCount-=1,GameBulletinBoard._mypanel.UpdateRainbowCount(GameBulletinBoard.GameManager._rainbowCount)),this._catchBall=null,this._isCatchBall=!1,GameBulletinBoard.GameManager._firedRainbowBall=!0;var e={x:10*this._xiangLiang.x,y:10*this._xiangLiang.y};egret.Tween.get(this).to({x:GameBulletinBoard.MapConfig.Canon.x-e.x,y:GameBulletinBoard.MapConfig.Canon.y-e.y},100).to({x:GameBulletinBoard.MapConfig.Canon.x,y:GameBulletinBoard.MapConfig.Canon.y},100)}},t.prototype.ChangeBallComplete=function(){this._isChangeBall=!1;var e=this._prepareBall;this._prepareBall=this._catchBall,this._catchBall=e,1==GameConst.guide},t.prototype.OnChangeBall=function(){var e=this;if(Main._main.PlayNPCSound(),null!=this._catchBall&&null!=this._prepareBall&&!this._isChangeBall){8==this._catchBall._type&&this.RainbowBall(),this._isChangeBall=!0;var t=new egret.Point(this._prepareBall._gameObject.x,this._prepareBall._gameObject.y),a=new egret.Point(this._catchBall._gameObject.x,this._catchBall._gameObject.y);egret.Tween.get(this._prepareBall._gameObject).to({x:a.x,y:a.y},400,egret.Ease.backIn),egret.Tween.get(this._catchBall._gameObject).to({x:t.x,y:t.y},400,egret.Ease.backIn).call(function(){return e.ChangeBallComplete()})}},t.prototype.RainbowBall=function(){if(null!=this._catchBall&&0==this._isChangeBall){8==this._catchBall._type?(this._catchBall._type=GameBulletinBoard.GameManager._typestored,this.RefreshColor()):GameBulletinBoard.GameManager._rainbowCount>=1&&(GameBulletinBoard.GameManager._typestored=this._catchBall._type,this._catchBall._type=8,GameBulletinBoard.GameManager._firedRainbowBall=!1);var e=this._catchBall._gameObject.getChildByName("ball_mc");e.gotoAndPlay(this._catchBall._type+"fps",-1),8!=this._catchBall._type&&e.stop(),this._catchBall.OnInit(this._catchBall._type),this._catchBall._gameObject.x=GameBulletinBoard._NPCFire.catchBall.x,this._catchBall._gameObject.y=GameBulletinBoard._NPCFire.catchBall.y}},t.prototype.GaveDirections=function(){var e=new egret.Point(GameBulletinBoard.GameManager._myNPCFire.x,GameBulletinBoard.GameManager._myNPCFire.y),t=this._touchPosition.subtract(e);egret.Point.distance(this._touchPosition,e);t.normalize(1),this._xiangLiang.x=t.x,this._xiangLiang.y=t.y;var a=Math.atan2(this._xiangLiang.y,this._xiangLiang.x);this._currentRotation=180+180*a/Math.PI,GameBulletinBoard.GameManager._myNPCFire.rotation=this._currentRotation,this._prepareBall&&(this._prepareBall._gameObject.rotation=this._currentRotation)},t.prototype.NPCFireNewInstanceBall=function(e){var t=new egret.Sprite;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;var a=new eui.Image("texiaoPngTuji_json.shadow");a.anchorOffsetX=45,a.anchorOffsetY=40,a.rotation=45,a.scaleX=a.scaleY=1.2*GameConst.ballScale;var i=new eui.Image("ball_shadow_png");i.anchorOffsetX=55,i.anchorOffsetY=55,i.scaleX=i.scaleY=GameConst.ballScale,i.alpha=.8;var n=GameBulletinBoard.GameManager.createFpsAnimation(e.toString());n.name="ball_mc",n.stop(),n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,t.addChild(a),t.addChild(n),t.addChild(i),GameBulletinBoard.GameManager._myNPCFire.addChildAt(t,2),n.$setScaleX(GameConst.ballScale),n.$setScaleY(GameConst.ballScale),n.$setVisible(!0),t.$setVisible(!0);var s=new Ball(t);return s},t.prototype.OnNewInstanceFireBall=function(e){var t=this.NPCFireNewInstanceBall(e).OnInit(e,1);return t._insert=1,t._isInScene=!0,t._gameObject.x=GameBulletinBoard._NPCFire.prepareBall.x+20,t._gameObject.y=GameBulletinBoard._NPCFire.prepareBall.y,t},t.prototype.CreateCatchBall=function(){var e=this;null!=this._prepareBall&&null==this._catchBall&&egret.Tween.get(this._prepareBall._gameObject).to({x:GameBulletinBoard._NPCFire.catchBall.x,y:GameBulletinBoard._NPCFire.catchBall.y},400,egret.Ease.backInOut).call(function(){return e.CreateCatchBallComplete(e._prepareBall)})},t.prototype.CreateCatchBallComplete=function(e){this._catchBall=e,this._prepareBall=null,this.CreatePrepareBall()},t.prototype.CreatePrepareBall=function(){var e=this;if(null==this._prepareBall){GameConst.fireBallType=this.GetNextBallType();var t=this.OnNewInstanceFireBall(GameConst.fireBallType);t.OnInit(GameConst.fireBallType),this._prepareBall=t,egret.Tween.get(t._gameObject).wait(0).to({x:GameBulletinBoard._NPCFire.prepareBall.x,y:GameBulletinBoard._NPCFire.prepareBall.y},400,egret.Ease.backInOut).call(function(){return e.CreatePrepareBallComplete(t)})}},t.prototype.GetNextBallType=function(){var e=0;return 1==GameConst.guide&&(this._tutorialIndex++,this._tutorialIndex<this._tutorialList.length&&(e=this._tutorialList[this._tutorialIndex])),11==GameConst.guide,12==GameConst.guide,0==GameConst.guide&&(e=GameBulletinBoard.DanJiGameFireStrategy()),e},t.prototype.resetEndGameffect=function(e){var t=this;void 0===e&&(e=!1),e?this._endEffectInterVal||(this._endEffectInterVal=egret.setInterval(function(){t.rotation+=30},this,10)):this._endEffectInterVal&&(egret.clearInterval(this._endEffectInterVal),this._endEffectInterVal=0)},t.prototype.Lose=function(){this._endGame=!0},t.prototype.Lock=function(){this._isLock=!0},t.prototype.Unlock=function(){this._isLock=!1},t.prototype.Begin=function(){this._endGame=!1},t}(eui.Component);__reflect(NPCFire.prototype,"NPCFire",["eui.UIComponent","egret.DisplayObject"]);var GameBulletinBoard=function(){function e(){}return e.SetFireBallManager=function(e){this._FireBallManager=e},e.SetNPCFire=function(e){this._NPCFire=e},e.SetGameOverUI=function(e){this._GameOverUI=e},e.Setmypanel=function(e){this._mypanel=e},e.ParserSeed=function(){this._huituiNum=0,this._typeNumber=-1,this._fireTypeNumber=-1,this._oldWave=-1,this._seedIndex=0,this._seedFireIndex=0,this._seedMapIndex=0,this._itemIndex=0,this._itemBackOrPauseIndex=0,this._itemTimeTwiceIndex=0,this._itemTimeIndex=0,this._appearItemIndex=0,this._appearTimeItemIndex1=0,this._appearTimeItemIndex2=0,this._seeds.length=0;for(var e=0;e<GameConst.randomSeed.length;e++){var t=0;t=e%11,t=(parseInt(GameConst.randomSeed[e],36)+t)%11,this._seeds.push(t)}},e.GameMapStrategy=function(){var t=this._seeds[this._seedMapIndex]%10;return this._seedMapIndex++,this._seedMapIndex=this._seedMapIndex>=this._seeds.length?0:this._seedMapIndex,0==GameConst.isSDK&&(t=e.RandomFrom(0,10)),t},e.GameBallItemTypeStrategy=function(t,a){var i=-1,n=e.GameManager._wave;if(n==GameConst.finalWave)i=-1;else{if(this._oldWave!=n&&n>1){var s=Math.floor(.5*(a-16));if(this._itemTimeTwiceIndex=this._itemIndex+1,this._itemTimeTwiceIndex=this._itemTimeTwiceIndex>=this._seeds.length?this._itemTimeTwiceIndex-this._seeds.length:this._itemTimeTwiceIndex,this._itemTimeIndex=this._itemIndex+2,this._itemTimeIndex=this._itemTimeIndex>=this._seeds.length?this._itemTimeIndex-this._seeds.length:this._itemTimeIndex,this._appearItemIndex=s+this._seeds[this._itemIndex],this._seeds[this._itemTimeTwiceIndex]%4==0){this._appearTimeItemIndex1=this._appearItemIndex+this._seeds[this._itemTimeTwiceIndex];var r=31-a;this._seeds[this._itemTimeIndex]-r>0?this._appearTimeItemIndex2=this._appearTimeItemIndex1+this._seeds[this._itemTimeIndex]-r:this._appearTimeItemIndex2=this._appearTimeItemIndex1+this._seeds[this._itemTimeIndex]}else this._seeds[this._itemTimeTwiceIndex]%2==0&&(this._appearTimeItemIndex1=this._appearItemIndex+this._seeds[this._itemTimeTwiceIndex]);this._itemIndex++,this._itemIndex=this._itemIndex>=this._seeds.length?0:this._itemIndex,this._oldWave=n}if(t==this._appearItemIndex){var o=this._seeds[this._itemBackOrPauseIndex]%4;i=2>o?o:i,this._itemBackOrPauseIndex++,this._itemBackOrPauseIndex=this._itemBackOrPauseIndex>=this._seeds.length?0:this._itemBackOrPauseIndex}(t==this._appearTimeItemIndex1||t==this._appearTimeItemIndex2)&&(i=0==e.RandomFrom(0,1)?0:2),0==i&&(this._huituiNum>=2&&(i=2),this._huituiNum++)}return i},e.GameBallTypeStrategy=function(){if(this._typeNumber<0){this._typeNumber=this._seeds[this._seedIndex]%4;var t=4+Math.floor((e.GameManager._wave-1)/GameConst.extreColorWave);t=e.GameManager._wave==GameConst.finalWave?7:t>6?6:t,this._type=this._seeds[this._seedIndex]%t,this._seedIndex++,this._seedIndex=this._seedIndex>=this._seeds.length?0:this._seedIndex}return this._typeNumber--,this._type},e.SetMapConfig=function(e){this.MapConfig=e},e.SetGameManager=function(e){this.GameManager=e},e.DanJiGameFireStrategy=function(){this._tempFireTypeList.length=0;for(var t=e.GameManager._snakeSegment,a=0;a<t.length;a++)for(var i=t[a];null!=i&&0==i._isNextDelete;)-1==this._tempFireTypeList.indexOf(i._type)&&this._tempFireTypeList.push(i._type),i=i.Next;var n=e.RandomFrom(0,this._tempFireTypeList.length-1),s=this._tempFireTypeList.length>0?this._tempFireTypeList[n]:e.RandomFrom(0,4);return s},e.RandomFrom=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.GameFireStrategy=function(){var e,t=!0;e=Main._main._snakeSegment;for(var a=0;a<e.length;a++)for(var i=e[a];null!=i;){if(-1==this._tempFireTypeList.indexOf(i._type)&&0==i._isNextDelete&&1==i._isInScene&&i._isPlayEffect==Ball.EFFECT_NORMAL){t=!1;break}i=i.Next}if(this._fireTypeNumber<0||this._fireTypeNumber>=0&&t){this._fireTypeNumber=this._seeds[this._seedFireIndex]%2,this._tempFireTypeList.length=0;for(var a=0;a<e.length;a++)for(var i=e[a];null!=i;)-1==this._tempFireTypeList.indexOf(i._type)&&0==i._isNextDelete&&1==i._isInScene&&i._isPlayEffect==Ball.EFFECT_NORMAL&&this._tempFireTypeList.push(i._type),i=i.Next;this._tempFireTypeList.sort(this.Compare);var n=e.length>0&&0==this._tempFireTypeList.length?e[e.length-1].Tail()._type:0==GameConst.guide?this._seeds[this._seedFireIndex]%4:this._seeds[this._seedFireIndex]%3;this._fireType=this._tempFireTypeList.length>0?this._tempFireTypeList[this._seeds[this._seedFireIndex]%this._tempFireTypeList.length]:n,this._seedFireIndex++,this._seedFireIndex=this._seedFireIndex>=this._seeds.length?0:this._seedFireIndex}return this._fireTypeNumber--,this._fireType},e.GameFireStrategyList=function(){return this._tempFireTypeList},e.Compare=function(e,t){return t>e?-1:e>t?1:0},e._typeNumber=-1,e._fireTypeNumber=-1,e._tempFireTypeList=new Array,e._seeds=new Array,e._appearItemIndex=0,e._appearTimeItemIndex1=0,e._appearTimeItemIndex2=0,e._seedIndex=0,e._seedFireIndex=0,e._seedMapIndex=0,e._itemIndex=0,e._itemBackOrPauseIndex=0,e._itemTimeTwiceIndex=0,e._itemTimeIndex=0,e._oldWave=-1,e._huituiNum=0,e}();__reflect(GameBulletinBoard.prototype,"GameBulletinBoard");var GameHelper=function(){function e(){}return e.IsNotHoleExit=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.StartPoint+1},e.IsArriveBeforeFailurePoint=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.beforeFailurePoint},e.IsArriveDangerousPoint=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.failurePoint-8},e.IsArriveFailurePoint=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.failurePoint},e.IsArriveStartPoint=function(e){return e._processIndex<GameBulletinBoard.MapConfig.StartPoint},e.IsArriveFastSpeedStartPoint=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.FastSpeedStartPoint},e.IsArriveFastSpeedEndPoint=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.FastSpeedEndPoint},e.IsArriveEndPoint=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.EndPoint},e.IsArriveInScenePoint=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.InScenePoint},e.IsArriveNextWaveNoticePoint=function(e){return e._processIndex>=GameBulletinBoard.MapConfig.NextWaveNoticePoint},e}();
__reflect(GameHelper.prototype,"GameHelper");var GameConst=function(){function e(){}return e.isSDK=isSdk,e.appVersion="0.18062201",e.guide=1,e.intoSceneIndex=4,e.randomSeed="BD9202CD232FF737",e.failureIndex=13,e.beforeFailureIndex=12,e.startIndex=0,e.fastSpeedStartIndex=6,e.fastSpeedEndIndex=30,e.nextWaveNoticeIndex=35,e.finalWave=10,e.finalWaveBallCount=40,e._currentBallName=1,e.waveDistance=12,e.extreColorWave=1,e.enterSpeed=15,e.defaultMoveSpeed=1.5,e.guideSpeed=40,e.waveExtreSpeedRatio=.7,e.beforeFailureSpeedRatio=.3,e.failureSpeed=15,e.limitSpeed=24,e.fallBackWaitDelaySpeed=0,e.fallBackWaitTime=.2,e.fallBackSpeed=-20,e.fastSpeed=24,e.maxSpeed=4.4,e.gameTime=100,e.autoCommitScoreTime=3,e.ballSpace=.92,e.firstWaveHeadIndex=35,e.guideEndIndex=36,e.firstWaveEndIndex=45,e.score=10,e.chainScore=20,e.comboScore=200,e.clearScore=1e3,e.ease=.09,e.fireMoveSpeed=1.1,e.ballTotalCount=30,e.isQuitGameStartTutorial=1,e.worldBallEffect=!0,e.showLog=!1,e.ballCachePool=!1,e.gameClearBonus=5e3,e.ballColorDic={0:"red",1:"yellow",2:"blue",3:"green",4:"purple",5:"white",6:"black",8:"rainbowcolor"},e.ballScale=.465,e.touchYPosition=65,e.realBallSpace=95,e.rainbowCount=3,e.queuePauseTime=3,e.queueBackTime=3,e.queueBackSpeed=-2,e.addGameTime=5,e.duizhanchaoshi=!1,e.gametype=1,e}();__reflect(GameConst.prototype,"GameConst");var GameOverUI=function(e){function t(){var t=e.call(this)||this;return t._timeOutId=0,t.skinName="resource/eui_skins/GameOverUI.exml",GameBulletinBoard.SetGameOverUI(t),t.clearScore.text="0",t.comboScore.text="0",t.chainScore.text="0",t.boardClearScore.text="0",t.FinalScore.text="0",UIFunctionUtil.addButtonClickByEff(t.gp_continue,t.onCommitScore,t),t}return __extends(t,e),t.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.updateMask=function(e){this.img_mask.mask=new egret.Rectangle(0,0,e,this.img_mask.height)},t.prototype.onCommitScore=function(){this._timeOutId&&(egret.clearInterval(this._timeOutId),this._timeOutId=0),GameBulletinBoard.GameManager.StopMusic(),MarkDataUtil.markGameActionData(MarkEventId.END_GAME,{desc:"zuma end_game",game_score:GameBulletinBoard.GameManager._score,game_wave:GameBulletinBoard.GameManager._wave},!0),GameConst.isSDK?Bigbear.end_match(GameBulletinBoard.GameManager._score):(GameConst.guide=1,Main._main._myNPCFire.resetEndGameffect(!1),this.hide(),MapMgr.ins().initNewMap())},t.prototype.show=function(){var e=this;this._timeOutId&&(egret.clearInterval(this._timeOutId),this._timeOutId=0);var t=0,a=this.img_mask.width;this.updateMask(a),this._timeOutId=egret.setInterval(function(){t>80?e.onCommitScore():t>30&&e.updateMask(a/50*(80-t)),t++},this,100),this.visible=!0,MarkDataUtil.markGameDateByHeart(!1)},t.prototype.hide=function(){this._timeOutId&&(egret.clearInterval(this._timeOutId),this._timeOutId=0),this.visible=!1},t.prototype.showTimesUp=function(){this.img_times_up.visible=this.img_game_over.visible=this.img_all_clear.visible=!1,this.img_times_up.visible=!0,MarkDataUtil.markGameActionData(MarkEventId.TIMES_UP,{desc:"zuma times_up"},!0)},t.prototype.showAllClear=function(){this.img_times_up.visible=this.img_game_over.visible=this.img_all_clear.visible=!1,this.img_all_clear.visible=!0,MarkDataUtil.markGameActionData(MarkEventId.ALL_CLEAR,{desc:"zuma all_clear"},!0)},t.prototype.showGameOver=function(){this.img_times_up.visible=this.img_game_over.visible=this.img_all_clear.visible=!1,this.img_game_over.visible=!0,MarkDataUtil.markGameActionData(MarkEventId.GAME_OVER,{desc:"zuma game_over"},!0)},t}(eui.Component);__reflect(GameOverUI.prototype,"GameOverUI",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){var e=this;this.img_bg||(this.img_bg=new eui.Image),this.width=this.img_bg.width=640,this.height=this.img_bg.height=1136,this.addChild(this.img_bg),RES.getResByUrl("resource/assets/preloading.jpg",function(t){e.img_bg.source=t},this),this.lb_version||(this.lb_version=new eui.Label),this.addChild(this.lb_version),this.lb_version.text="version:"+GameConst.appVersion,this.lb_version.bottom=5,this.lb_version.right=5,this.img_load_di||(this.img_load_di=new eui.Image),this.addChild(this.img_load_di),this.img_load_di.horizontalCenter=this.img_load_di.verticalCenter=0,RES.getResByUrl("resource/assets/loading/loading_xia.png",function(t){e.img_load_di.source=t},this),this.img_load||(this.img_load=new eui.Image),this.addChild(this.img_load),this.img_load.horizontalCenter=this.img_load.verticalCenter=0,RES.getResByUrl("resource/assets/loading/loading_shang.png",function(t){e.img_load.source=t;var a=new egret.Rectangle(0,0,0,e.img_load.height);e.img_load.mask=a},this),this.img_load.scaleX=this.img_load.scaleY=this.img_load_di.scaleX=this.img_load_di.scaleY=.55},t.prototype.setProgress=function(e,t){if(this.img_load){var a=new egret.Rectangle(0,0,e/t*this.img_load.width,this.img_load.height);this.img_load.mask=a}},t}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,a){function i(i){t.call(a,i,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?i(n):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BallType;!function(e){e[e.red=0]="red",e[e.yellow=1]="yellow",e[e.blue=2]="blue",e[e.green=3]="green",e[e.purple=4]="purple",e[e.white=5]="white",e[e.black=6]="black",e[e.rainbow=8]="rainbow"}(BallType||(BallType={}));var MapConfig=function(){function e(){}return e.prototype.GetMapPointInfo=function(e){return this.MapInfo[e]},e.prototype.GetAngle=function(e){var t=Math.floor(e);0>e&&(e=0),0>t&&(t=0),t>this.MapInfo.length-3&&(t=this.MapInfo.length-3);var a=egret.Point.interpolate(this.MapInfo[t+1].subtract(this.MapInfo[t+2]),this.MapInfo[t].subtract(this.MapInfo[t+1]),e-t);return a},e.prototype.GetPoint=function(e){var t=Math.floor(e);return 0>e&&(e=0),0>t&&(t=0),t>this.MapInfo.length-2&&(t=this.MapInfo.length-2),egret.Point.interpolate(this.MapInfo[t+1],this.MapInfo[t],e-t)},e.prototype.InitRunningConfg=function(){this.Length=this.MapInfo.length,this.failurePoint=this.Length-GameConst.failureIndex-2,this.beforeFailurePoint=this.failurePoint-GameConst.beforeFailureIndex,this.GuideStartPoint=GuideMgr.ins().intoSceneIndex,this.StartPoint=GameConst.startIndex,this.InScenePoint=GuideMgr.ins().intoSceneIndex,this.FastSpeedStartPoint=GameConst.fastSpeedStartIndex,this.FastSpeedEndPoint=GuideMgr.ins().fastSpeedEndIndex,this.NextWaveNoticePoint=GameConst.nextWaveNoticeIndex},e.prototype.GetPointLerp=function(e,t,a){var i=e;return i.x=i.x+(t.x-i.x)*a,i.y=i.y+(t.y-i.y)*a,i},e}();__reflect(MapConfig.prototype,"MapConfig");var mypanel=function(e){function t(){var t=e.call(this)||this;t.skinName="resource/eui_skins/mypanel.exml",GameBulletinBoard.Setmypanel(t),t.gamePause.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGamePause,t),t.score.strokeColor=0,t.score.stroke=3;var a=RES.getRes("dangerous_json"),i=RES.getRes("dangerous_png"),n=new egret.MovieClipDataFactory(a,i);return t._dangerousMc=new egret.MovieClip(n.generateMovieClipData("danger")),t._dangerousMc.gotoAndPlay("danger",-1),t}return __extends(t,e),t.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.img_hole_normal_effect.visible=!1;var a=16777215,i=.3,n=70,s=70,r=35,o=3,l=!1,h=!1,m=new egret.GlowFilter(a,i,n,s,r,o,l,h);this.rainbowBg.filters=[m];var _=1;egret.Tween.get(this.rainbowBg,{loop:!0,onChange:function(){return"0"==t.rainbowLabel.text?void(m.strength=0):(m.strength>30?_=-1:m.strength<5&&(_=1),void(m.strength=m.strength+_))}}).to({},100)},t.prototype.init=function(){},t.prototype.UpdateRainbowCount=function(e){this.rainbowLabel.text=e.toString()},t.prototype.onGamePause=function(e){GuideMgr.ins().hasGuided()||(2==GameConst.gametype?GameBulletinBoard.GameManager.gameTimeDely.start():GameBulletinBoard.GameManager.gameTimeDely.stop(),GameBulletinBoard.GameManager._myResumePause.oldState=GameBulletinBoard.GameManager._gameState,GameBulletinBoard.GameManager._gameState=GameState.beginEnvirment,GameBulletinBoard.GameManager._gameIsFirstActive=!0,GameBulletinBoard.GameManager._myResumePause.show(!1))},t.prototype.UpdateScore=function(e){GameBulletinBoard.GameManager._endGame||(this.score.text=e.toString())},t.prototype.ShowWave=function(e){for(var t=1;11>t;t++){var a=this.waveCount.getChildByName("waveCount"+t);a&&(a.visible=t>=e)}var i=this.waveCount.getChildByName("waveCount"+e);if(i){var n=i.scaleX;egret.Tween.get(i).to({scaleX:1.5*n,scaleY:1.5*n},500).to({scaleX:n,scaleY:n,visible:!1},500),this.waveEffectNum.text=e.toString();var s=this.waveEffect.x;egret.Tween.get(this.waveEffect).to({x:s+300},500,egret.Ease.sineIn).wait(500).to({x:s},500,egret.Ease.sineIn)}},t.prototype.ShowBallScore=function(e){this._oldChain!=e&&e>1&&(this._oldChain=e,this.chainEffectNum.text=e.toString(),this.chainEffect.$setVisible(!0),this.chainEffect.$setScaleX(1.2),this.chainEffect.$setScaleY(1.2),egret.Tween.get(this.chainEffect).to({scaleX:1,scaleY:1},300))},t.prototype.ClearChainCount=function(){this.chainEffect.$setVisible(!1)},t.prototype.updateTimeLabel=function(e){var t=e%3600/60>>0,a=e%3600%60>>0,i=10>a?"0"+a:a+"",n=10>t?""+t:t+"";this.time.text=n+":"+i,this.progressBar.value=this.progressBar.maximum-e},t.prototype.changeMap=function(e){this.canonInfo.getChildByName("canon"+e).anchorOffsetX=this.canonInfo.getChildByName("canon"+e).width/2,this.canonInfo.getChildByName("canon"+e).anchorOffsetY=this.canonInfo.getChildByName("canon"+e).height/2,this.canonInfo.localToGlobal(this.canonInfo.getChildByName("canon"+e).x,this.canonInfo.getChildByName("canon"+e).y,GameBulletinBoard.MapConfig.Canon);for(var t=0;t<this.bg.numChildren;++t){var a=this.bg.getChildByName("myImage"+t);a&&(a.visible=t==e)}for(var t=0;t<this.mapinfo.numChildren;++t){var i=GameBulletinBoard.GameManager._mypanel.canonInfo.getChildByName("canon"+t);i&&(i.visible=t==e)}var n=this["gp_hole_"+e];n&&(n.addChild(this.img_hole_normal_effect),n.addChild(this._dangerousMc)),this.lb_version.text=GameConst.isSDK?"":"version:"+GameConst.appVersion+" map:"+e},t.prototype.showDangerours=function(){var e=this;this.img_dangerous.visible=!0,this.img_dangerous.horizontalCenter=-530,egret.Tween.removeTweens(this.img_dangerous),egret.Tween.get(this.img_dangerous).to({horizontalCenter:30},500,egret.Ease.sineIn).wait(200).to({horizontalCenter:0},500,egret.Ease.sineIn).wait(1300).call(function(){e.img_dangerous.visible=!1}),SoundMgr.ins().playSoundEffect(SoundMgr.RES_DANGEROUS)},t.prototype.showHoleDanger=function(e){this._dangerousMc.visible=e},t}(eui.Component);__reflect(mypanel.prototype,"mypanel",["eui.UIComponent","egret.DisplayObject"]);var Ball=function(){function e(e){this._itemType=-1,this._insertTotalIndex=10,this._insertIndex=0,this._isNextDelete=!1,this._isInScene=!1,this._isPlayEffect=0,this._gameObject=e,this._eular=new egret.Point,this._xiangLiang=new egret.Point,this._defaultPos=new egret.Point(-12,0)}return e.prototype.OnInit=function(e,t){return void 0===t&&(t=-1),this._type=e,this._itemType=t,this._gameObject.$setVisible(!0),this.Pre=null,this.Next=null,this._isNextDelete=!1,this},e.prototype.UpdateBall=function(e){if(1!=this._insert){var t=!0;0==GameConst.guide&&t;var a=GameBulletinBoard.MapConfig.GetAngle(this._processIndex),i=Math.atan2(a.y,a.x);this.currentBallAngle=90+180*i/Math.PI,this._gameObject.rotation=this.currentBallAngle;var n=this._gameObject.getChildAt(0);n.rotation=-this.currentBallAngle+45,this._gameObject.x=GameBulletinBoard.MapConfig.GetPoint(this._processIndex).x,this._gameObject.y=GameBulletinBoard.MapConfig.GetPoint(this._processIndex).y}},e.prototype.SetNext=function(e){this.Next=e},e.prototype.SetPre=function(e){this.Pre=e},e.prototype.Head=function(){for(var e=this;;){if(null==e.Pre)return e;e=e.Pre}},e.prototype.Tail=function(){for(var e=this;;){if(null==e.Next)return e;e=e.Next}},e.prototype.IsDestroy=function(){return null==this._gameObject?!0:!1},e.prototype.GetPosition=function(){return new egret.Point(this._gameObject.x,this._gameObject.y)},e.prototype.TheSameColorQueue=function(e,t){var a,i=1;GameConst._pre=this,GameConst._next=this,a=this;do{if(null==a.Pre||a.Pre._type!=this._type||0!=a.Pre._isPlayEffect||1!=a.Pre._isInScene)break;GameConst._pre=a.Pre,i++,a=a.Pre}while(null!=a);a=this;do{if(null==a.Next||a.Next._type!=this._type||0!=a.Next._isPlayEffect||1!=a.Next._isInScene)break;GameConst._next=a.Next,i++,a=a.Next}while(null!=a);return i},Object.defineProperty(e.prototype,"easeSpeed",{get:function(){return this._easeSpeed},set:function(e){var t=this._easeSpeed;this._easeSpeed=e;var a=Math.abs(this._easeSpeed);a=10>18*(a+.1)?0:18*(a+.1);var i=this._gameObject.getChildByName("ball_mc"),n=i.currentFrame,s=(i.currentFrameLabel,i.$frameLabelStart);if(i.frameRate=110>a?Math.round(a):110,this._easeSpeed<0&&t>=0){removeFromParant(i);var r=Main._main.createFpsAnimation(this._type.toString(),!0);r.name=i.name,this._gameObject.addChildAt(r,1);for(var o=s;n>o;o++)r.nextFrame();r.play(-1)}else if(this._easeSpeed>=0&&0>t){removeFromParant(i);var r=Main._main.createFpsAnimation(this._type.toString());r.name=i.name,this._gameObject.addChildAt(r,1);for(var o=s;n>o;o++)r.nextFrame();r.play(-1)}},enumerable:!0,configurable:!0}),e.EFFECT_NORMAL=0,e.EFFECT_PLAYING=1,e.EFFECT_END=2,e.ITEM_BACK=0,e.ITEM_PAUSE=1,e.ITEM_TIME=2,e}();__reflect(Ball.prototype,"Ball");var Pause=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/Pause.exml",t.btn_resume.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnResumeButton,t),t.ResumeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnResumeButton,t),t.QuitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnQuitButton,t),t}return __extends(t,e),t.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.lb_version.text="version:"+GameConst.appVersion},t.prototype.OnResumeButton=function(e){this.oldState;this.parent&&this.hide(),GameBulletinBoard.GameManager._endGame||(MarkDataUtil.markGameDateByHeart(!0),GameBulletinBoard.GameManager.gameTimeDely.start(),egret.setTimeout(function(){GameBulletinBoard.GameManager._isComplete321Time&&(GameBulletinBoard.GameManager._gameState=GameState.runningTime)},this,100))},t.prototype.OnQuitButton=function(e){GameBulletinBoard.GameManager._gameState=GameState.beginEnvirment,this.hide(),GameBulletinBoard.GameManager._endGame=!0,GameBulletinBoard._NPCFire.Lose(),GameBulletinBoard.GameManager.gameTimeDely.stop(),GameBulletinBoard._GameOverUI.showGameOver(),GameBulletinBoard.GameManager.showGameOverUI()},t.prototype.show=function(e){GameBulletinBoard.GameManager.StopMusic(),MarkDataUtil.markGameDateByHeart(!1),this.visible=!0,this.parent&&this.parent.addChild(this),e?(this.gp_pause.visible=!0,this.gp_end.visible=!1):(this.gp_pause.visible=!1,this.gp_end.visible=!0);for(var t=GameBulletinBoard.GameManager._snakeSegment,a=0;a<t.length;a++)for(var i=t[a];null!=i&&0==i._isNextDelete;){var n=i._gameObject.getChildByName("ball_mc");n.frameRate=0,i=i.Next}},t.prototype.hide=function(){GameBulletinBoard.GameManager.PlayMusic(),this.visible=!1},t}(eui.Component);__reflect(Pause.prototype,"Pause",["eui.UIComponent","egret.DisplayObject"]);var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){if(GameConst.isSDK){for(;"undefined"==typeof Bigbear;);Bigbear.init(function(t){console.log("sdk init success"),console.log(t),GameConst.randomSeed=t.randoms,GameConst.gametype=t.game_type;var a=JSON.parse(t.match_parameters);GameConst.failureIndex=a.failureIndex,GameConst.beforeFailureIndex=a.beforeFailureIndex,GameConst.intoSceneIndex=a.intoSceneIndex,GameConst.startIndex=a.startIndex,GameConst.fastSpeedStartIndex=a.fastSpeedStartIndex,GameConst.fastSpeedEndIndex=a.fastSpeedEndIndex,GameConst.nextWaveNoticeIndex=a.nextWaveNoticeIndex,GameConst.finalWave=a.finalWave,GameConst.finalWaveBallCount=a.finalWaveBallCount,1==GameConst.gametype?GameConst.guide=(t.cash_count||0)+(t.chip_count||0)>0?0:1:GameConst.guide=0,GameConst.waveDistance=a.waveDistance,GameConst.extreColorWave=a.extreColorWave,GameConst.enterSpeed=a.enterSpeed,GameConst.defaultMoveSpeed=a.defaultMoveSpeed,GameConst.waveExtreSpeedRatio=a.waveExtreSpeedRatio,GameConst.beforeFailureSpeedRatio=a.beforeFailureSpeedRatio,GameConst.failureSpeed=a.failureSpeed,GameConst.limitSpeed=a.limitSpeed,GameConst.fallBackWaitTime=a.fallBackWaitTime,GameConst.fastSpeed=a.fastSpeed,GameConst.maxSpeed=a.maxSpeed,GameConst.gameTime=a.gameTime,GameConst.firstWaveHeadIndex=a.firstWaveHeadIndex,GameConst.guideEndIndex=a.guideEndIndex,GameConst.firstWaveEndIndex=a.firstWaveEndIndex,GameConst.score=a.score,GameConst.chainScore=a.chainScore,GameConst.comboScore=a.comboScore,GameConst.clearScore=a.clearScore,GameConst.ease=a.ease,GameConst.fireMoveSpeed=a.fireMoveSpeed,GameConst.ballTotalCount=a.ballTotalCount,GameConst.gameClearBonus=a.gameClearBonus,GameConst.rainbowCount=a.rainbowCount,MarkDataUtil._player_id=t.player_id||-1,e()},GameConst.appVersion)}else e()})]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,a,i){function n(e){t.call(i,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),a.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var FireBallManager=function(){function e(){this._point=new egret.Point,GameBulletinBoard.SetFireBallManager(this),this.mActiveBallQueue=new Array}return e.prototype.FireBallManagerUpdate=function(e){for(var t=e,a=this.mActiveBallQueue.length;a-->0;){this.mActiveBallQueue[a]._gameObject.getChildByName("ball_mc").isPlaying||this.mActiveBallQueue[a]._gameObject.getChildByName("ball_mc").play(-1);var i=this.mActiveBallQueue[a];t>20&&GuideMgr.ins().hasGuided()&&(t=20),i._gameObject.x+=i._xiangLiang.x*t*GameConst.fireMoveSpeed,i._gameObject.y+=i._xiangLiang.y*t*GameConst.fireMoveSpeed,this.IsOutOfBounds(i._gameObject)&&(GameBulletinBoard.GameManager.ClearChainCount(),GameBulletinBoard.GameManager.ClearComboCount(),this.mActiveBallQueue.splice(a,1),i._gameObject.parent&&i._gameObject.parent.removeChild(i._gameObject))}},e.prototype.IsOutOfBounds=function(e){return e.x>639||e.x<1||e.y>1128||e.y<1?!0:!1},e.prototype.IsCross=function(e,t,a){var i=egret.Point.distance(e,t);return a>=i},e.prototype.GetActiveFireList=function(){return this.mActiveBallQueue},e.prototype.OnFire=function(e,t){GameBulletinBoard.GameManager.addChildAt(e._gameObject,1),GameBulletinBoard.GameManager._myNPCFire.localToGlobal(GameBulletinBoard._NPCFire.catchBall.x,GameBulletinBoard._NPCFire.catchBall.y,this._point),e._gameObject.x=this._point.x,e._gameObject.y=this._point.y,e._xiangLiang.x=t.x,e._xiangLiang.y=t.y,this.mActiveBallQueue.push(e)},e.prototype.DestroyBall=function(e){e._gameObject.parent&&e._gameObject.parent.removeChild(e._gameObject)},e.prototype.clearAllBallQueue=function(){for(var e=0,t=this.mActiveBallQueue;e<t.length;e++){var a=t[e];removeFromParant(a._gameObject)}this.mActiveBallQueue=[]},e}();__reflect(FireBallManager.prototype,"FireBallManager");var GuideMgr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._guide=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.hasGuided=function(){return GameConst.guide>0},t.prototype.startGuide=function(){if(this._guide=[],1==GameConst.guide){for(var e=new Array,t=0;7>t;t++)e.push(Main._main.NewInstanceBall(0,-1).OnInit(0,-1));this._guide.push(e);for(var a=new Array,t=0;3>t;t++)a.push(Main._main.NewInstanceBall(0,-1).OnInit(0,-1));for(var t=0;3>t;t++)a.push(Main._main.NewInstanceBall(2,-1).OnInit(2,-1));for(var t=0;3>t;t++)a.push(Main._main.NewInstanceBall(0,-1).OnInit(0,-1));this._guide.push(a);for(var i=new Array,t=0;3>t;t++)i.push(Main._main.NewInstanceBall(0,-1).OnInit(0,-1));for(var t=0;3>t;t++)i.push(Main._main.NewInstanceBall(2,-1).OnInit(2,-1));this._guide.push(i)}},Object.defineProperty(t.prototype,"intoSceneIndex",{get:function(){switch(GameConst.guide){case 1:return 4;default:return GameConst.intoSceneIndex}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fastSpeedEndIndex",{get:function(){switch(GameConst.guide){case 1:return 43;default:return GameConst.fastSpeedEndIndex}},enumerable:!0,configurable:!0}),t}(SingletonClass);__reflect(GuideMgr.prototype,"GuideMgr");var MapMgr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initNewMap=function(){var e=0;switch(GameConst.guide){case 1:e=3;break;default:GameBulletinBoard.ParserSeed(),e=GameBulletinBoard.GameMapStrategy()%10}GameBulletinBoard.MapConfig.Canon=new egret.Point;var t=GameBulletinBoard.GameManager._mypanel.mapinfo.getChildByName("map"+e),a=t.numChildren;GameBulletinBoard.MapConfig.MapInfo=[];for(var i=0;a>i;++i){GameBulletinBoard.MapConfig.MapInfo[i]=new egret.Point;var n=t.getChildAt(i);GameBulletinBoard.MapConfig.MapInfo[i].setTo(n.x+n.width/2,n.y+n.height/2)}GameBulletinBoard.GameManager._mypanel.changeMap(e),GuideMgr.ins().startGuide(),GameBulletinBoard.MapConfig.InitRunningConfg(),MarkDataUtil.markGameDateByHeart(!0),MarkDataUtil.markGameActionData(MarkEventId.BEGIN_GAME,{desc:"zuma begin game"},!0),GameBulletinBoard.GameManager.TutorialStartGame(GameConst.guide)},t}(SingletonClass);__reflect(MapMgr.prototype,"MapMgr");var SoundMgr=function(e){function t(){var t=e.call(this)||this;return t._soundReses={},t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.init=function(){this._soundReses={};for(var e=0,a=[t.RES_DANGEROUS];e<a.length;e++){var i=a[e];this._soundReses[i]=RES.getRes(i)}},t.prototype.playSoundEffect=function(e){if(this._soundReses[e]){this._soundReses[e].play(0,1)}},t.prototype.playBg=function(e){void 0===e&&(e=!0)},t.RES_DANGEROUS="dangerous_mp3",t}(SingletonClass);__reflect(SoundMgr.prototype,"SoundMgr");var MarkEventId;!function(e){e[e.HEARTTIME=100101]="HEARTTIME",e[e.OPENGUIDE=100102]="OPENGUIDE",e[e.CLOSEGUIDE=100103]="CLOSEGUIDE",e[e.PAUSEGAME=100104]="PAUSEGAME",e[e.SHOOT=100105]="SHOOT",e[e.BEGIN_GAME=100106]="BEGIN_GAME",e[e.END_GAME=100107]="END_GAME",e[e.GAME_OVER=100108]="GAME_OVER",e[e.ALL_CLEAR=100109]="ALL_CLEAR",e[e.TIMES_UP=100110]="TIMES_UP",e[e.GUIDE=100111]="GUIDE",e[e.GUIDE_SKIP=100112]="GUIDE_SKIP"}(MarkEventId||(MarkEventId={}));var MarkDataUtil={_gameTime:-1,_gameScore:-1,_gamewave:-1,_player_id:-1,catchMarkData:[],markSendCount:0,_timeId:0,markGameActionData:function(e,t,a){void 0===a&&(a=!1),t.os_time=(new Date).getTime(),t.guide=GameConst.guide,t.game_time=MarkDataUtil._gameTime,this.catchMarkData.push({event_id:e,mark_data:t}),a&&this.maidianNow()},maidianNow:function(){GameConst.isSDK&&"undefined"!=typeof Bigbear&&this.catchMarkData.length>0&&(this.markSendCount++,Bigbear.maidian("zuma_"+this._player_id+"_"+this.markSendCount+"_"+GameConst.appVersion,JSON.stringify(this.catchMarkData)),this.catchMarkData=[])},markGameDateByHeart:function(e){var t=this,a=MarkEventId.HEARTTIME;if(e){if(this._timeId)return;this._timeId=setInterval(function(){var e={desc:"zuma heart",os_time:(new Date).getTime(),game_time:t._gameTime,game_score:t._gameScore,game_wave:t._gamewave};GuideMgr.ins().hasGuided()||t.markGameActionData(a,e,!0)},1e4)}else this._timeId&&clearInterval(this._timeId),this._timeId=0,this.maidianNow()},updateData:function(e,t,a){this._gameTime=e,this._gameScore=t,this._gamewave=a}},UIFunctionUtil={lableBusy:!1,lableTextCmdList:[],addButtonClickByEff:function(e,t,a){void 0===t&&(t=function(){}),e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x+=e.width/2,e.y+=e.height/2,e.anchorOffsetY=e.height/2;var i=a?a:e;e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(e).to({scaleX:.9,scaleY:.9},100)},i),e.addEventListener(egret.TouchEvent.TOUCH_CANCEL,function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100)},i),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100)},i),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100),t&&t.call(i)},i)},setLableTextByNumEff:function(e,t,a){var i=UIFunctionUtil;i.lableTextCmdList.push(t);var n=function(){if(!i.lableBusy&&i.lableTextCmdList.length>0){i.lableBusy=!0,e.font=RES.getRes("change_score_font_fnt");var t=i.lableTextCmdList.shift(),s=(parseInt(e.text),t),r=10,o=egret.setInterval(function(){var t=e;0==r&&(t.text=s+"",i.lableBusy=!1,egret.clearInterval(o),0==i.lableTextCmdList.length&&a(),n()),r--},e,50)}};n()},createHoleBlackBg:function(e,t,a){void 0===t&&(t=640),void 0===a&&(a=1136);var i=new egret.DisplayObjectContainer,n=new egret.Shape;n.graphics.beginFill(0,.8),n.graphics.drawRect(0,0,t,a),n.graphics.endFill(),i.addChild(n);for(var s=0,r=e;s<r.length;s++){var o=r[s];i.addChild(o),o.blendMode=egret.BlendMode.ERASE}var l=new egret.RenderTexture;l.drawToTexture(i);var h=new egret.Bitmap(l);return h}},GuideView=function(e){function t(){var t=e.call(this)||this;return t.maxSubIndex=2,t.curSubIndex=0,t}return __extends(t,e),t.prototype.partAdded=function(t,a){e.prototype.partAdded.call(this,t,a)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.addTouchTapEvent(this.gp_1_0_start,function(){Main._main.DaoJiTime(),GameBulletinBoard._NPCFire.flyInScene(),egret.Tween.removeTweens(t.gp_1_0),t.gp_main.visible=!1,egret.Tween.get(t.gp_1_0).wait(2500).call(function(){t.showNextGuide(),t.gp_main.visible=!0})}),this.addTouchTapEvent(this.gp_1_1,function(){t.showNextGuide()}),this.addTouchTapEvent(this.gp_1_2_clear,function(e){GameBulletinBoard._NPCFire._touchPosition=t.parent.globalToLocal(e.stageX,e.stageY),GameBulletinBoard._NPCFire.GaveDirections(),GameBulletinBoard._NPCFire.OnFire(),egret.Tween.removeTweens(t.gp_1_2),t.gp_main.visible=!1,egret.Tween.get(t.gp_1_2).wait(1500).call(function(){t.showNextGuide(),t.gp_main.visible=!0})}),this.addTouchTapEvent(this.gp_1_3_swap,function(e){GameBulletinBoard._NPCFire.OnChangeBall(),t.gp_1_3_swap.visible=!1,egret.Tween.removeTweens(t.gp_1_3_swap),egret.Tween.get(t.gp_1_3_swap).wait(700).call(function(){t.showNextGuide(),t.gp_1_3_swap.visible=!0})}),this.addTouchTapEvent(this.gp_1_4_gap,function(e){GameBulletinBoard._NPCFire._touchPosition=t.parent.globalToLocal(e.stageX,e.stageY),GameBulletinBoard._NPCFire.GaveDirections(),GameBulletinBoard._NPCFire.OnFire(),egret.Tween.removeTweens(t.gp_1_4_gap),t.gp_main.visible=!1,egret.Tween.get(t.gp_1_4_gap).wait(500).call(function(){t.showNextGuide(),t.gp_main.visible=!0})}),this.addTouchTapEvent(this.gp_1_5,function(){t.gp_main.visible=!1,t.curSubIndex++,egret.Tween.get(t.gp_1_5).wait(2e3).call(function(){t.showGuide(),t.gp_main.visible=!0})}),this.addTouchTapEvent(this.gp_1_6_rainbow,function(e){GameBulletinBoard._NPCFire.RainbowBall(),t.gp_1_6_rainbow.visible=!1,egret.Tween.removeTweens(t.gp_1_6_rainbow),egret.Tween.get(t.gp_1_6_rainbow).wait(100).call(function(){t.showNextGuide(),t.gp_1_6_rainbow.visible=!0})}),this.addTouchTapEvent(this.gp_1_7_rainbow_fire,function(e){GameBulletinBoard._NPCFire._touchPosition=t.parent.globalToLocal(e.stageX,e.stageY),GameBulletinBoard._NPCFire.GaveDirections(),GameBulletinBoard._NPCFire.OnFire(),egret.Tween.removeTweens(t.gp_1_7_rainbow_fire),t.gp_main.visible=!1,egret.Tween.get(t.gp_1_7_rainbow_fire).wait(1e3).call(function(){GameBulletinBoard._NPCFire.Lose(),GameBulletinBoard._NPCFire.resetEndGameffect(!0),t.showNextGuide(),t.gp_main.visible=!0})}),this.addTouchTapEvent(this.gp_1_end_play,function(){t.endGuideAndBegin(function(){})}),this.addTouchTapEvent(this.img_skip,function(){MarkDataUtil.markGameActionData(MarkEventId.GUIDE_SKIP,{desc:"zuma guide skip",guide:GameConst.guide,guide_sub:t.curSubIndex},!0),t.endGuideAndBegin(function(){})})},t.prototype.endGuideAndBegin=function(e){var t=this;this.img_skip.touchEnabled=!1,this.gp_1_end_play.visible=!1,egret.Tween.removeTweens(this.gp_main),egret.Tween.get(this.gp_main).to({alpha:0},1200).call(function(){t.gp_main.alpha=1,GameConst.guide=0,t.curSubIndex=0,Main._main._gameState=GameState.beginEnvirment,e&&e(),t.img_skip.touchEnabled=!0,t.gp_1_end_play.visible=!0,t.hideGuide(),MapMgr.ins().initNewMap()})},t.prototype.addTouchTapEvent=function(e,t){void 0===t&&(t=function(e){}),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){t(e)},this)},t.prototype.showNextGuide=function(){this.curSubIndex++,this.showGuide()},t.prototype.showGuide=function(){this.curSubIndex>=this.viewstack_1.numChildren||(this.visible=!0,this.viewstack_1.selectedIndex=this.curSubIndex,this.playGuideEffect(),MarkDataUtil.markGameActionData(MarkEventId.GUIDE,{desc:"zuma guide",guide:GameConst.guide,guide_sub:this.curSubIndex},!0))},t.prototype.playGuideEffect=function(){if(1==GameConst.guide)switch(this.curSubIndex){case 1:this.createBlackBg([{command:"drawRect",params:[this.gp_1_1_time.x,this.gp_1_1_time.y,this.gp_1_1_time.width,this.gp_1_1_time.height]},{command:"drawCircle",params:[this.gp_1_1_hole.x+this.gp_1_1_hole.width/2,this.gp_1_1_hole.y+this.gp_1_1_hole.height/2,this.gp_1_1_hole.height/2]}]);break;case 2:this.createBlackBg([{command:"drawCircle",params:[this.gp_1_2_clear.x+this.gp_1_2_clear.width/2,this.gp_1_2_clear.y+this.gp_1_2_clear.height/2,this.gp_1_2_clear.height/2]}]);break;case 3:this.createBlackBg([{command:"drawCircle",params:[this.gp_1_3_swap.x+this.gp_1_3_swap.width/2,this.gp_1_3_swap.y+this.gp_1_3_swap.height/2,this.gp_1_3_swap.height/2]}]);break;case 4:this.createBlackBg([{command:"drawCircle",params:[this.gp_1_4_gap.x+this.gp_1_4_gap.width/2,this.gp_1_4_gap.y+this.gp_1_4_gap.height/2,this.gp_1_4_gap.height/2]}]);break;case 5:this.createBlackBg([{command:"drawCircle",params:[this.gp_1_5_top.x+this.gp_1_5_top.width/2,this.gp_1_5_top.y+this.gp_1_5_top.height/2,this.gp_1_5_top.height/2]},{command:"drawCircle",params:[this.gp_1_5_bot.x+this.gp_1_5_bot.width/2,this.gp_1_5_bot.y+this.gp_1_5_bot.height/2,this.gp_1_5_bot.height/2]}]);break;case 6:this.createBlackBg([{command:"drawCircle",params:[this.gp_1_6_rainbow.x+this.gp_1_6_rainbow.width/2,this.gp_1_6_rainbow.y+this.gp_1_6_rainbow.height/2,this.gp_1_6_rainbow.height/2]}]);break;case 7:this.createBlackBg([{command:"drawCircle",params:[this.gp_1_7_rainbow_fire.x+this.gp_1_7_rainbow_fire.width/2,this.gp_1_7_rainbow_fire.y+this.gp_1_7_rainbow_fire.height/2,this.gp_1_7_rainbow_fire.height/2]}]);break;default:this.createBlackBg()}},t.prototype.hideGuide=function(){this.visible=!1},t.prototype.isGuidePasue=function(){return this.visible&&this.gp_main.visible},t.prototype.createBlackBg=function(e){void 0===e&&(e=[]),this.gp_bg.removeChildren();for(var t=new egret.Shape,a=0,i=e;a<i.length;a++){var n=i[a];t.graphics[n.command]&&(t.graphics.beginFill(0,1),(s=t.graphics)[n.command].apply(s,n.params),t.graphics.endFill())}this.gp_bg.addChild(UIFunctionUtil.createHoleBlackBg([t]));var s},t}(eui.Component);__reflect(GuideView.prototype,"GuideView",["eui.UIComponent","egret.DisplayObject"]);